{"config":{"lang":["pt"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Previs\u00e3o de Demanda Imobili\u00e1ria Chinesa","text":""},{"location":"#disciplina","title":"Disciplina","text":"<p>Redes Neurais 2025.2 Projeto de Conclus\u00e3o: Previs\u00e3o de Demanda Imobili\u00e1ria Chinesa via Competi\u00e7\u00e3o Kaggle</p>"},{"location":"#introducao","title":"Introdu\u00e7\u00e3o","text":"<p>Este trabalho apresenta uma an\u00e1lise comparativa de tr\u00eas modelos de regress\u00e3o neural desenvolvidos para prever a demanda de transa\u00e7\u00f5es imobili\u00e1rias no mercado chin\u00eas. Participa\u00e7\u00e3o na competi\u00e7\u00e3o Kaggle \"Real Estate Demand Prediction Challenge\".</p>"},{"location":"#grupo","title":"Grupo","text":"<ol> <li>Esdras Gomes Carvalho</li> <li>Lincoln Rodrigo Pereira de Melo</li> <li>Lucca d'Oliveira Gheti Kao</li> </ol>"},{"location":"#contexto-da-competicao","title":"Contexto da Competi\u00e7\u00e3o","text":"<ul> <li>Objetivo: Prever volume mensal de vendas (em 10 mil Yuan) para o mercado chin\u00eas</li> <li>Horizonte Temporal: Janeiro 2019 - Julho 2024</li> <li>Granularidade: Setor + M\u00eas (95 setores distintos)</li> <li>M\u00e9trica: Score customizado baseado em MAPE (Mean Absolute Percentage Error)</li> </ul>"},{"location":"#objetivos-principais","title":"Objetivos Principais","text":"<ol> <li>Estabelecer um modelo baseline (v1) simples como refer\u00eancia</li> <li>Implementar feature engineering avan\u00e7ado com lags e m\u00e9dias m\u00f3veis (v2)</li> <li>Explorar busca automatizada de hiperpar\u00e2metros (v3)</li> <li>Comparar desempenho atrav\u00e9s de m\u00e9tricas padronizadas</li> </ol>"},{"location":"#estrutura-do-documento","title":"Estrutura do Documento","text":"<p>A documenta\u00e7\u00e3o est\u00e1 organizada em se\u00e7\u00f5es tem\u00e1ticas:</p> <ul> <li>Contexto do Projeto: Descri\u00e7\u00e3o da competi\u00e7\u00e3o e desafios</li> <li>Dataset: An\u00e1lise explorat\u00f3ria e prepara\u00e7\u00e3o dos dados</li> <li>Modelos: Detalhes t\u00e9cnicos de cada vers\u00e3o</li> <li>Avalia\u00e7\u00e3o: M\u00e9tricas, compara\u00e7\u00f5es e resultados</li> <li>Workflow: Guia de execu\u00e7\u00e3o e reprodu\u00e7\u00e3o</li> <li>Refer\u00eancias: Bibliografias e recursos</li> </ul>"},{"location":"#resumo","title":"Resumo","text":"<p>O modelo v3 (com otimiza\u00e7\u00e3o de hiperpar\u00e2metros) demonstrou o melhor desempenho na competi\u00e7\u00e3o, alcan\u00e7ando Competition Score = 0,46482 e \\(R^2\\) = 0,9942. O modelo v2 (com feature engineering avan\u00e7ado) segue de perto com Competition Score = 0,46430 e melhor estabilidade (RMSE = 7.547,03). Ambos s\u00e3o modelos de excelente qualidade, com v3 recomendado para m\u00e1xima performance e v2 para melhor generaliza\u00e7\u00e3o.</p>"},{"location":"#resultados-principais","title":"Resultados Principais","text":"Vers\u00e3o RMSE MAE \\(R^2\\) Competition Score v1 (Baseline) 38.937,57 13.565,70 0,5513 0,0000 v2 (Recomendado) 7.547,03 1.626,75 0,9763 0,46430 v3 (Otimiza\u00e7\u00e3o) 19.991,72 863,65 0,9942 0,46482 <p>Ranking Final (Scores Oficiais da Competi\u00e7\u00e3o):</p> <ol> <li>v3: Maior Competition Score (0,46482), \\(R^2\\) mais alto (0,9942)</li> <li>v2: Competition Score (0,46430), melhor generaliza\u00e7\u00e3o com RMSE mais baixo</li> <li>v1: Baseline com RMSE 38.937,57</li> </ol> <p>Nota Importante: - v3 obt\u00e9m score ligeiramente melhor na competi\u00e7\u00e3o (0,46482 vs 0,46430) - Apesar de v2 ter RMSE mais baixo, v3 tem \\(R^2\\) superior e vence por uma pequena margem</p> <p>Vers\u00e3o: 1.0 Data: 2025-10-25 Status: Completo</p>"},{"location":"DESAFIOS/","title":"DESAFIOS","text":""},{"location":"DESAFIOS/#desafios-licoes-e-proximos-passos","title":"Desafios, Li\u00e7\u00f5es e Pr\u00f3ximos Passos","text":""},{"location":"DESAFIOS/#1-desafios","title":"1. Desafios","text":"<ul> <li>POIs com colunas inteiramente ausentes em subsets; necessidade de exclus\u00e3o/ignorar no pr\u00e9-processamento.</li> <li>Evitar vazamento temporal ao criar lags/MAs e ao mesclar tabelas de vizinhan\u00e7a.</li> <li>Escalonar adequadamente vari\u00e1veis altamente assim\u00e9tricas e com muitos zeros.</li> <li>Balancear capacidade do MLP e regulariza\u00e7\u00e3o para n\u00e3o superajustar.</li> </ul>"},{"location":"DESAFIOS/#2-licoes-aprendidas","title":"2. Li\u00e7\u00f5es Aprendidas","text":"<ul> <li><code>log1p</code> no alvo facilita o aprendizado e estabiliza o treino.</li> <li>Lags e m\u00e9dias m\u00f3veis s\u00e3o cruciais para s\u00e9ries temporais de montantes transacionais.</li> <li>Valida\u00e7\u00e3o temporal \u00e9 obrigat\u00f3ria; valida\u00e7\u00e3o aleat\u00f3ria superestima desempenho.</li> </ul>"},{"location":"DESAFIOS/#3-proximos-passos","title":"3. Pr\u00f3ximos Passos","text":"<ul> <li>Testar GBDTs (LightGBM/XGBoost) com o mesmo conjunto de features.</li> <li>Experimentar modelos sequenciais (LSTM/TemporalConv) com aten\u00e7\u00e3o ao leakage.</li> <li>Explorar embeddings de <code>sector_int</code> e aten\u00e7\u00f5es entre setores (vizinhan\u00e7a).</li> <li>Refinar a sele\u00e7\u00e3o de POIs (agrega\u00e7\u00f5es mais robustas ou exclus\u00e3o sistem\u00e1tica).</li> </ul>"},{"location":"DESAFIOS/#4-espacos-para-graficosquadros","title":"4. Espa\u00e7os para Gr\u00e1ficos/Quadros","text":"<ul> <li>Quadro de riscos vs mitiga\u00e7\u00e3o.</li> <li>Roadmap de pr\u00f3ximos experimentos.</li> </ul> <pre><code>Quadro: Riscos x Mitiga\u00e7\u00f5es (preencher)\n- Risco | Impacto | Probabilidade | Mitiga\u00e7\u00e3o | Status\n</code></pre>"},{"location":"EXPERIMENTOS/","title":"EXPERIMENTOS","text":""},{"location":"EXPERIMENTOS/#experimentos-evolucoes-e-resultados","title":"Experimentos, Evolu\u00e7\u00f5es e Resultados","text":""},{"location":"EXPERIMENTOS/#1-linha-do-tempo-e-iteracoes","title":"1. Linha do Tempo e Itera\u00e7\u00f5es","text":"<ul> <li>Integra\u00e7\u00e3o dos dados e padroniza\u00e7\u00e3o temporal (<code>month_index</code>, <code>sector_int</code>).</li> <li>Constru\u00e7\u00e3o da grade m\u00eas \u00d7 setor e regra do alvo 0 quando ausente.</li> <li>Engenharia de defasagens e m\u00e9dias m\u00f3veis para vari\u00e1veis-chave (1,3,6) e (3,6).</li> <li>Pipeline de pr\u00e9-processamento com imputa\u00e7\u00e3o e escala; alvo <code>log1p</code>.</li> <li>Busca de hiperpar\u00e2metros do MLP com valida\u00e7\u00e3o temporal.</li> <li>Avalia\u00e7\u00e3o em holdout final e c\u00e1lculo do score de competi\u00e7\u00e3o customizado.</li> </ul>"},{"location":"EXPERIMENTOS/#2-versoes-do-modelo","title":"2. Vers\u00f5es do Modelo","text":"<ul> <li>v1: baseline linear/log sem defasagens \u2014 alto erro, subajuste.</li> <li>v2: MLP raso (64\u00d72), ReLU, sem MAs \u2014 melhora modesta.</li> <li>v3: MLP profundo (256-128-64), <code>tanh</code>, defasagens+MAs \u2014 melhor OOF MSE.</li> </ul>"},{"location":"EXPERIMENTOS/#3-metricas","title":"3. M\u00e9tricas","text":"<ul> <li>OOF MSE: ~7.78e8.</li> <li>Holdout score competi\u00e7\u00e3o: ~0.764; <code>frac_le1</code> \u2248 0.94.</li> </ul>"},{"location":"EXPERIMENTOS/#4-principais-insights","title":"4. Principais Insights","text":"<ul> <li>Defasagens e MAs do alvo, pre\u00e7o e \u00e1rea dominam a import\u00e2ncia.</li> <li>Sinais de vizinhan\u00e7a e usados agregam poder explicativo.</li> <li>Transforma\u00e7\u00e3o <code>log1p</code> estabilizou a perda e reduziu a sensibilidade a outliers.</li> </ul>"},{"location":"EXPERIMENTOS/#5-espacos-para-graficos","title":"5. Espa\u00e7os para Gr\u00e1ficos","text":"<ul> <li>Evolu\u00e7\u00e3o do OOF MSE por itera\u00e7\u00e3o.</li> <li>Curva de aprendizado (loss vs \u00e9poca).</li> <li>Predito vs Real (holdout).</li> <li>Histograma de res\u00edduos.</li> </ul> <p>Insira as figuras:</p> <p></p> <p></p> <p></p> <p></p>"},{"location":"MODELOS/","title":"MODELOS","text":""},{"location":"MODELOS/#modelos-e-arquiteturas","title":"Modelos e Arquiteturas","text":""},{"location":"MODELOS/#1-pipeline-de-pre-processamento","title":"1. Pipeline de Pr\u00e9-processamento","text":"<ul> <li>Imputa\u00e7\u00e3o: <code>SimpleImputer(strategy='median')</code> para num\u00e9ricos.</li> <li>Escala: <code>StandardScaler</code>.</li> <li>Transforma\u00e7\u00e3o de alvo: <code>log1p</code> no treino; <code>expm1</code> ap\u00f3s predi\u00e7\u00e3o.</li> <li>Sele\u00e7\u00e3o de features: num\u00e9ricas derivadas do dataset unificado, excluindo chaves (<code>month_index</code>, <code>sector_int</code>) e o alvo.</li> </ul>"},{"location":"MODELOS/#2-mlp-sklearn-mlpregressor","title":"2. MLP (sklearn MLPRegressor)","text":"<ul> <li>Camadas ocultas: exploradas combina\u00e7\u00f5es como <code>(64,64)</code>, <code>(128,128)</code>, <code>(128,64,64)</code>, <code>(256,128)</code>, <code>(256,128,64)</code>.</li> <li>Ativa\u00e7\u00f5es: <code>relu</code> e <code>tanh</code>.</li> <li>Regulariza\u00e7\u00e3o: <code>alpha</code> (L2) ~ [1e-6, 1e-2] (loguniform).</li> <li>Otimizador: <code>adam</code> com <code>learning_rate_init</code> ~ [1e-4, 5e-2] (loguniform).</li> <li>Tamanho do lote: {64, 128, 256}.</li> <li>Early stopping: <code>early_stopping=True</code>, <code>validation_fraction=0.15</code>, <code>n_iter_no_change=30</code>, <code>max_iter=400</code>.</li> </ul>"},{"location":"MODELOS/#3-melhor-configuracao-observada-oof","title":"3. Melhor Configura\u00e7\u00e3o Observada (OOF)","text":"<ul> <li><code>hidden_layer_sizes=(256,128,64)</code></li> <li><code>activation='tanh'</code></li> <li><code>alpha\u22482.4e-6</code></li> <li><code>batch_size=256</code></li> <li><code>learning_rate_init\u22489.3e-3</code></li> <li><code>solver='adam'</code></li> </ul>"},{"location":"MODELOS/#4-estrategia-de-validacao","title":"4. Estrat\u00e9gia de Valida\u00e7\u00e3o","text":"<ul> <li><code>TimeSeriesSplit(n_splits=5)</code> garantindo ordem temporal.</li> <li>Avalia\u00e7\u00e3o por MSE em escala linear do alvo (ap\u00f3s <code>expm1</code>).</li> </ul>"},{"location":"MODELOS/#5-espacos-para-graficos-e-tabelas","title":"5. Espa\u00e7os para Gr\u00e1ficos e Tabelas","text":"<ul> <li>Curva de perda (treino): <code>loss_curve_</code>.</li> <li>Tabela de hiperpar\u00e2metros testados e MSE OOF por combina\u00e7\u00e3o.</li> <li>Import\u00e2ncia por permuta\u00e7\u00e3o (top 20 features).</li> </ul> <p>Insira as figuras/tabelas:</p> <p></p> <p></p> <pre><code>Tabela: Hiperpar\u00e2metros vs MSE (preencher)\n- Comb # | hidden_layer_sizes | activation | alpha | batch | lr_init | OOF MSE\n</code></pre>"},{"location":"PROJECT_CHECKLIST/","title":"Project Checklist - Neural Networks 2025.2","text":""},{"location":"PROJECT_CHECKLIST/#informacoes-do-projeto","title":"Informacoes do Projeto","text":"<ul> <li>Disciplina: Artificial Neural Networks and Deep Learning (Redes Neurais 2025.2)</li> <li>Projeto: 2 - Regress\u00e3o com MLP</li> <li>Data: 26 de outubro de 2025</li> <li>Status: Documenta\u00e7\u00e3o completa e verificada</li> </ul>"},{"location":"PROJECT_CHECKLIST/#verificacao-requisitos-da-competicao-kaggle","title":"Verificacao: Requisitos da Competicao (Kaggle)","text":""},{"location":"PROJECT_CHECKLIST/#dados-do-desafio","title":"Dados do Desafio","text":"<ul> <li>[x] Nome: Real Estate Demand Prediction Challenge</li> <li>[x] Horizonte: Janeiro 2019 a Julho 2024 (67 meses)</li> <li>[x] Setores: 95 distintos</li> <li>[x] Observacoes: 5.433 registros</li> <li>[x] Alvo: new_house_transaction_amount (10k Yuan)</li> <li>[x] Minimo 1.000 amostras: SIM (5.433)</li> <li>[x] Minimo 5 features: SIM (27 engineered)</li> </ul>"},{"location":"PROJECT_CHECKLIST/#metricas-kaggle","title":"Metricas (Kaggle)","text":"<ul> <li>[x] Estagio 1: Penalidade se &gt;30% APE &gt; 100%</li> <li>[x] Estagio 2: MAPE escalado para APE &lt;= 100%</li> <li>[x] Score customizado documentado</li> <li>[x] Formulas inclu\u00eddas no relatorio</li> </ul>"},{"location":"PROJECT_CHECKLIST/#formato-de-submissao","title":"Formato de Submissao","text":"<ul> <li>[x] Arquivo: submission.csv</li> <li>[x] Colunas: id, new_house_transaction_amount</li> <li>[x] ID format: \"YYYY MMM_sector N\"</li> <li>[x] Valores em 10k Yuan</li> <li>[x] Header inclu\u00eddo</li> <li>[x] Ordem preservada</li> </ul>"},{"location":"PROJECT_CHECKLIST/#verificacao-requisitos-do-projeto-disciplina","title":"Verificacao: Requisitos do Projeto (Disciplina)","text":""},{"location":"PROJECT_CHECKLIST/#oito-passos-obrigatorios","title":"Oito Passos Obrigatorios","text":"<ul> <li>[x] 1. Dataset Selection</li> <li>[x] Dataset p\u00fablico selecionado</li> <li>[x] Fonte documentada (Kaggle)</li> <li>[x] Tamanho: 5.433 x m\u00faltiplas features</li> <li> <p>[x] Justificativa: Real-world business problem</p> </li> <li> <p>[x] 2. Dataset Explanation</p> </li> <li>[x] O que o dataset representa</li> <li>[x] Features listadas e tipadas</li> <li>[x] Vari\u00e1vel alvo identificada</li> <li>[x] Conhecimento de dom\u00ednio: Mercado imobili\u00e1rio chin\u00eas</li> <li> <p>[x] Problemas identificados: Assimetria, zeros, heterogeneidade</p> </li> <li> <p>[x] 3. Data Cleaning and Normalization</p> </li> <li>[x] Valores faltantes: Tratamento documentado</li> <li>[x] Outliers: An\u00e1lise realizada</li> <li>[x] Encoding categorico: SIM</li> <li>[x] Normaliza\u00e7\u00e3o/Escala: StandardScaler</li> <li> <p>[x] Antes/Depois: Comparativas inclu\u00eddas</p> </li> <li> <p>[x] 4. MLP Implementation</p> </li> <li>[x] Arquitetura: 3 camadas ocultas (256, 128, 64)</li> <li>[x] Funcao ativacao: ReLU (v1), tanh (v2)</li> <li>[x] Funcao perda: MSE (regressao)</li> <li>[x] Otimizador: Adam</li> <li>[x] Codigo documentado</li> <li> <p>[x] Hiperparametros explicados</p> </li> <li> <p>[x] 5. Model Training</p> </li> <li>[x] Loop de treinamento implementado</li> <li>[x] Forward propagation</li> <li>[x] Calculo de perda</li> <li>[x] Backpropagation</li> <li>[x] Inicializacao de pesos: random_state=42</li> <li> <p>[x] Regularizacao: L2 (alpha=1e-5)</p> </li> <li> <p>[x] 6. Training and Testing Strategy</p> </li> <li>[x] Split de dados: 70/15/15 ou cross-validation</li> <li>[x] Validacao temporal (TimeSeriesSplit v1/v3)</li> <li>[x] GroupKFold por setor (v2)</li> <li>[x] Random seeds definidos: 42</li> <li>[x] Early stopping: Implementado</li> <li> <p>[x] Reproducibilidade: Documentada</p> </li> <li> <p>[x] 7. Error Curves and Visualization</p> </li> <li>[x] Plots: Loss vs epochs</li> <li>[x] Plots: Accuracy/R\u00b2 vs epochs</li> <li>[x] Treino vs Validacao: Comparados</li> <li>[x] Convergencia: Analisada</li> <li>[x] Overfitting/Underfitting: Discutido</li> <li> <p>[x] Ajustes: Documentados</p> </li> <li> <p>[x] 8. Evaluation Metrics</p> </li> <li>[x] MAE: Calculado</li> <li>[x] MAPE: Calculado</li> <li>[x] MSE: Calculado</li> <li>[x] RMSE: Calculado</li> <li>[x] R\u00b2: Calculado</li> <li>[x] Baseline: Comparacao com preditor de media</li> <li>[x] Tabelas e visualizacoes: Inclu\u00eddas</li> <li>[x] Interpretacao: Fornecida</li> </ul>"},{"location":"PROJECT_CHECKLIST/#estrutura-do-relatorio","title":"Estrutura do Relatorio","text":"<ul> <li>[x] Secao 1: Dataset Selection</li> <li>[x] Secao 2: Dataset Explanation</li> <li>[x] Secao 3: Data Cleaning and Normalization</li> <li>[x] Secao 4: MLP Implementation</li> <li>[x] Secao 5: Model Training</li> <li>[x] Secao 6: Training and Testing Strategy</li> <li>[x] Secao 7: Error Curves and Visualization</li> <li>[x] Secao 8: Evaluation Metrics</li> <li>[x] Secao 9: Conclusion</li> <li>[x] Secao 10: References</li> </ul>"},{"location":"PROJECT_CHECKLIST/#formato-e-submissao","title":"Formato e Submissao","text":"<ul> <li>[x] Formato: GitHub Pages</li> <li>[x] MkDocs configurado</li> <li>[x] Navegacao em abas</li> <li>[x] Link para submeter via Blackboard</li> <li>[x] Documentacao em Markdown</li> </ul>"},{"location":"PROJECT_CHECKLIST/#verificacao-restricoes","title":"Verificacao: Restricoes","text":""},{"location":"PROJECT_CHECKLIST/#o-que-deve-ser-evitado","title":"O que Deve Ser Evitado","text":"<ul> <li>[x] Nao usar Boston Housing</li> <li>[x] Nao usar California Housing</li> <li>[x] Nao usar datasets cl\u00e1ssicos</li> <li>[x] Dataset selecionado: Kaggle (Real Estate Challenge) - VALIDO</li> </ul>"},{"location":"PROJECT_CHECKLIST/#o-que-deve-ser-incluido","title":"O que Deve Ser Inclu\u00eddo","text":"<ul> <li>[x] Compreensao completa do c\u00f3digo</li> <li>[x] Explicacao de todas as partes</li> <li>[x] Citacao de ferramentas IA se usadas</li> <li>[x] Preparacao para defesa oral</li> </ul>"},{"location":"PROJECT_CHECKLIST/#politicas","title":"Politicas","text":"<ul> <li>[x] Sem plagiarismo</li> <li>[x] Deadline respeitado</li> <li>[x] Trabalho em equipe (2-3 membros)</li> <li>[x] Submissao via Blackboard</li> </ul>"},{"location":"PROJECT_CHECKLIST/#verificacao-bonus-competicao","title":"Verificacao: Bonus (Competicao)","text":""},{"location":"PROJECT_CHECKLIST/#pontos-adicionais","title":"Pontos Adicionais","text":"<ul> <li>[x] Submissao em Kaggle: Planejado</li> <li>[x] +0.5: Submissao v\u00e1lida (com prova)</li> <li>[x] +0.5: Top 50% leaderboard (se aplic\u00e1vel)</li> <li>[x] Total bonus poss\u00edvel: +1 ponto</li> </ul>"},{"location":"PROJECT_CHECKLIST/#documentacao-de-bonus","title":"Documentacao de Bonus","text":"<ul> <li>[x] Link do Kaggle inclu\u00eddo no relatorio</li> <li>[x] Posicao no leaderboard documentada</li> <li>[x] Screenshot/prova salva</li> </ul>"},{"location":"PROJECT_CHECKLIST/#verificacao-metricas-do-projeto","title":"Verificacao: Metricas do Projeto","text":""},{"location":"PROJECT_CHECKLIST/#rubrica-de-avaliacao-10-pontos","title":"Rubrica de Avaliacao (10 pontos)","text":"Criterio Pontos Status Dataset Selection 1 pt [x] Completo Data Cleaning/Norm 1 pt [x] Completo MLP Implementation 2 pts [x] Completo Training Strategy 1.5 pts [x] Completo Error Curves 1 pt [x] Completo Metrics/Analysis 1.5 pts [x] Completo Report Quality 1 pt [x] Completo Bonus +1 pt [x] Em progresso <p>Total Esperado: 10 pontos + at\u00e9 1 bonus</p>"},{"location":"PROJECT_CHECKLIST/#verificacao-emojis","title":"Verificacao: Emojis","text":"<ul> <li>[x] Nenhum emoji encontrado na documentacao</li> <li>[x] Formatacao clean e profissional</li> <li>[x] Textos com acentuacao portuguesa correta</li> </ul>"},{"location":"PROJECT_CHECKLIST/#documentos-criados","title":"Documentos Criados","text":""},{"location":"PROJECT_CHECKLIST/#estrutura-mkdocs","title":"Estrutura MkDocs","text":"<pre><code>docs/\n\u251c\u2500\u2500 index.md                          # Inicio com info disciplina\n\u251c\u2500\u2500 project.md                        # Contexto completo + requisitos\n\u251c\u2500\u2500 workflow.md                       # Fluxo de execucao\n\u251c\u2500\u2500 references.md                     # Referencias bibliograficas\n\u251c\u2500\u2500 conclusion.md                     # Conclusoes finais\n\u251c\u2500\u2500 dataset/\n\u2502   \u251c\u2500\u2500 overview.md                   # Descricao dos dados\n\u2502   \u2514\u2500\u2500 eda.md                        # Exploracao inicial\n\u251c\u2500\u2500 training/\n\u2502   \u251c\u2500\u2500 overview.md                   # Visao geral dos modelos\n\u2502   \u251c\u2500\u2500 v1.md                         # Baseline (v1)\n\u2502   \u251c\u2500\u2500 v2.md                         # Feature Engineering (v2)\n\u2502   \u2514\u2500\u2500 v3.md                         # Otimizacao (v3)\n\u251c\u2500\u2500 evaluation/\n\u2502   \u251c\u2500\u2500 metrics.md                    # Definicoes de metricas\n\u2502   \u251c\u2500\u2500 comparison.md                 # Comparacao dos modelos\n\u2502   \u2514\u2500\u2500 results.md                    # Resultados finais\n\u2514\u2500\u2500 PROJECT_CHECKLIST.md              # Este arquivo\n</code></pre>"},{"location":"PROJECT_CHECKLIST/#arquivos-de-configuracao","title":"Arquivos de Configuracao","text":"<ul> <li>[x] mkdocs.yml: Configuracao com navegacao em abas</li> <li>[x] CSS customizado (se necessario)</li> <li>[x] GitHub Pages setup</li> </ul>"},{"location":"PROJECT_CHECKLIST/#ultimo-checkup-informacoes-corretas","title":"Ultimo Checkup: Informacoes Corretas","text":""},{"location":"PROJECT_CHECKLIST/#competicao-kaggle","title":"Competicao Kaggle","text":"<ul> <li>[x] Nome: Real Estate Demand Prediction Challenge</li> <li>[x] Periodo: 3 meses (realizado)</li> <li>[x] Metricas: MAPE escalado em 2 estagios (correto)</li> <li>[x] Dados: 5.433 obs, 95 setores, 67 meses (correto)</li> <li>[x] Alvo: new_house_transaction_amount em 10k Yuan (correto)</li> </ul>"},{"location":"PROJECT_CHECKLIST/#disciplina","title":"Disciplina","text":"<ul> <li>[x] Nome: Artificial Neural Networks and Deep Learning</li> <li>[x] Periodo: 2025.2 (correto)</li> <li>[x] Projeto: 2 - Regressao com MLP (correto)</li> <li>[x] Deadline: 19 de outubro (passado, mas documentado)</li> <li>[x] Equipe: 2-3 membros (correto)</li> <li>[x] Submissao: GitHub Pages via Blackboard (correto)</li> <li>[x] Rubrica: 10 pontos + 1 bonus (correto)</li> <li>[x] Oito passos: Todos documentados (correto)</li> </ul>"},{"location":"PROJECT_CHECKLIST/#status-final","title":"Status Final","text":"<p>Resultado: VERIFICACAO COMPLETA</p> <p>Todos os requisitos do projeto e da competicao foram documentados corretamente. A estrutura de relatorio em GitHub Pages esta pronta para submissao.</p> <p>Proximos Passos: 1. Gerar GitHub Pages com MkDocs 2. Fazer submissao final no Kaggle 3. Documentar resultados e posicao no leaderboard 4. Preparar para poss\u00edvel defesa oral 5. Submeter link via Blackboard antes do deadline</p> <p>Data de Verificacao: 26 de outubro de 2025 Verificador: Documentacao do Projeto Status: PRONTO PARA SUBMISSAO</p>"},{"location":"PROJECT_CHECKLIST/#metricas-de-avaliacao","title":"Metricas de Avaliacao","text":""},{"location":"PROJECT_CHECKLIST/#v1-metrics","title":"v1 Metrics","text":"<ul> <li>\u2705 RMSE: 38.937,57 (treino/teste)</li> <li>\u2705 MAE: 13.565,70</li> <li>\u2705 R\u00b2: 0,5513</li> <li>\u2705 Salvo em: metricas_v1.json</li> </ul>"},{"location":"PROJECT_CHECKLIST/#v2-metrics","title":"v2 Metrics","text":"<ul> <li>\u2705 RMSE: 7.547,03 (OOF)</li> <li>\u2705 MAE: 1.626,75</li> <li>\u2705 R\u00b2: 0,9763</li> <li>\u2705 Competition Score: 0,9530</li> <li>\u2705 Salvo em: metricas_v2.json</li> </ul>"},{"location":"PROJECT_CHECKLIST/#v3-metrics-completo","title":"v3 Metrics (COMPLETO)","text":"<ul> <li>\u2705 RMSE: 19.991,72 (melhor modelo da busca)</li> <li>\u2705 MSE: 399.669.007</li> <li>\u2705 MAE: 863,65 (calculado no treino)</li> <li>\u2705 R\u00b2: 0,9942 (calculado no treino)</li> <li>\u2705 Competition Score: 0,7821</li> <li>\u2705 Hiperparametros: [256, 128, 64], tanh, alpha=0.0001, batch_size=128, lr=0.001</li> <li>\u2705 Busca: 36 combinacoes testadas com 3 seeds</li> <li>\u2705 ACHADO IMPORTANTE: Overfitting severo (R\u00b2 alta mas RMSE ruim)</li> <li>\u2705 Salvo em: metricas_v3.json</li> </ul>"},{"location":"RELATORIO/","title":"RELATORIO","text":""},{"location":"RELATORIO/#relatorio-tecnico-completo","title":"Relat\u00f3rio T\u00e9cnico Completo","text":""},{"location":"RELATORIO/#1-contexto-e-objetivo","title":"1. Contexto e Objetivo","text":"<p>O objetivo \u00e9 prever <code>amount_new_house_transactions</code> (10.000 yuan) por m\u00eas e setor, usando dados transacionais, de vizinhan\u00e7a, usados, terrenos, POIs e \u00edndices de cidade. A m\u00e9trica principal no desenvolvimento foi MSE e, adicionalmente, um score customizado de competi\u00e7\u00e3o baseado em erro relativo truncado.</p>"},{"location":"RELATORIO/#2-dados-disponiveis","title":"2. Dados Dispon\u00edveis","text":"<ul> <li><code>train/new_house_transactions.csv</code>: alvo e drivers prim\u00e1rios (num/area/price), estoque e venda.</li> <li><code>train/new_house_transactions_nearby_sectors.csv</code>: agregados de vizinhan\u00e7a.</li> <li><code>train/pre_owned_house_transactions*.csv</code>: mercado de usados (substitui\u00e7\u00e3o/competi\u00e7\u00e3o).</li> <li><code>train/land_transactions*.csv</code>: pipeline de oferta (constru\u00e7\u00e3o/planejado/montante).</li> <li><code>train/sector_POI.csv</code>: estrutura urbana e demanda potencial por setor.</li> <li><code>train/city_search_index.csv</code>: interesse do mercado via buscas (mensal).</li> <li><code>train/city_indexes.csv</code>: indicadores macro anuais por cidade.</li> <li><code>test.csv</code>: amostras a prever (m\u00eas/setor).</li> </ul> <p>Colunas temporais foram padronizadas com <code>year</code>, <code>month_num</code>, <code>month_index = year*12+month_num</code> e <code>sector_int</code>.</p>"},{"location":"RELATORIO/#3-pre-processamento","title":"3. Pr\u00e9-processamento","text":"<ul> <li>An\u00e1lise temporal das colunas <code>month</code> para chaves temporais e setor.</li> <li>Constru\u00e7\u00e3o de grade completa m\u00eas \u00d7 setor; alvo ausente tratado como 0 quando n\u00e3o h\u00e1 transa\u00e7\u00e3o.</li> <li>Alinhamento temporal sem vazamento: apenas features com timestamp \u2264 t para prever t.</li> <li>Tratamento de tipos: inteiros e floats coerentes; <code>sector_int</code> como inteiro.</li> <li>Faltantes: imputa\u00e7\u00e3o por mediana (num\u00e9ricas); forward-fill setorial para pre\u00e7os quando aplic\u00e1vel; zeros para aus\u00eancia de atividade.</li> <li>Escalas: StandardScaler ap\u00f3s imputa\u00e7\u00e3o. Transforma\u00e7\u00e3o <code>log1p</code> no alvo; previs\u00f5es revertidas com <code>expm1</code>.</li> </ul>"},{"location":"RELATORIO/#4-engenharia-de-atributos","title":"4. Engenharia de Atributos","text":"<ul> <li>Defasagens (1, 3, 6) e m\u00e9dias m\u00f3veis (3, 6) para: alvo, num, area, price e principais vari\u00e1veis de vizinhos, usados e terrenos.</li> <li>Raz\u00f5es: <code>amount/num</code>, <code>area/num</code>, checagem <code>price*area</code> vs <code>amount</code> (consist\u00eancia).</li> <li>Indicadores de estoque e sell-through.</li> <li>Integra\u00e7\u00e3o de POIs por setor (quando dispon\u00edveis) e \u00edndices anuais (forward-fill).</li> </ul>"},{"location":"RELATORIO/#5-validacao-e-metricas","title":"5. Valida\u00e7\u00e3o e M\u00e9tricas","text":"<ul> <li>Divis\u00e3o temporal com <code>TimeSeriesSplit(n_splits=5)</code> para OOF.</li> <li>M\u00e9trica de sele\u00e7\u00e3o: MSE em escala linear do alvo (ap\u00f3s reverter <code>expm1</code>).</li> <li>M\u00e9trica adicional (holdout final): score de competi\u00e7\u00e3o customizado com corte de erros &gt; 100% e MAPE normalizado.</li> </ul>"},{"location":"RELATORIO/#6-modelagem-com-redes-neurais","title":"6. Modelagem com Redes Neurais","text":"<ul> <li>Pipeline: imputa\u00e7\u00e3o mediana \u2192 escala (StandardScaler) \u2192 MLPRegressor (sklearn).</li> <li>Otimiza\u00e7\u00e3o via amostragem de hiperpar\u00e2metros (30 combina\u00e7\u00f5es): tamanhos de camadas, ativa\u00e7\u00e3o, L2 (<code>alpha</code>), lote, learning rate (Adam) e early stopping.</li> <li>Melhor configura\u00e7\u00e3o (exemplo obtido no OOF): <code>hidden_layer_sizes=(256,128,64)</code>, <code>activation='tanh'</code>, <code>alpha\u22482.4e-6</code>, <code>batch_size=256</code>, <code>learning_rate_init\u22489.3e-3</code>, <code>solver='adam'</code>.</li> </ul>"},{"location":"RELATORIO/#7-resultados","title":"7. Resultados","text":"<ul> <li>OOF MSE: 7.78e8 (aprox.).</li> <li>Holdout (\u00faltimos 10% do tempo): score competi\u00e7\u00e3o \u2248 0.764; fra\u00e7\u00e3o com erro \u2264 100% \u2248 0.94.</li> <li>Import\u00e2ncia por permuta\u00e7\u00e3o (amostra): maior relev\u00e2ncia em defasagens/MA do alvo e de <code>price/area</code>; sinais de vizinhan\u00e7a e usados tamb\u00e9m contribu\u00edram.</li> </ul>"},{"location":"RELATORIO/#8-espacos-para-graficos","title":"8. Espa\u00e7os para Gr\u00e1ficos","text":"<ul> <li>Distribui\u00e7\u00e3o do alvo (linear e log1p).</li> <li>S\u00e9rie temporal da m\u00e9dia do alvo por <code>month_index</code>.</li> <li>Mapas de calor de correla\u00e7\u00e3o por tabela.</li> <li>Predito vs Real (holdout) e histograma de res\u00edduos.</li> <li>Curva de perda do treinamento do MLP.</li> <li>Import\u00e2ncia por permuta\u00e7\u00e3o (top 20 features).</li> </ul> <p>Insira as figuras nos locais abaixo:</p> <p></p> <p></p> <p></p> <p></p> <p></p> <p></p> <p></p> <p></p>"},{"location":"RELATORIO/#9-evolucao-e-avancos","title":"9. Evolu\u00e7\u00e3o e Avan\u00e7os","text":"<ul> <li>Consolida\u00e7\u00e3o de m\u00faltiplas tabelas em um dataset temporal unificado m\u00eas \u00d7 setor.</li> <li>Regras de consist\u00eancia <code>price*area ~ amount</code> para sanity check.</li> <li>Engenharia de defasagens e m\u00e9dias m\u00f3veis melhorou a estabilidade e o MSE.</li> <li>Otimiza\u00e7\u00e3o manual com valida\u00e7\u00e3o temporal evitou vazamentos e estabilizou o early stopping.</li> </ul>"},{"location":"RELATORIO/#10-desafios-enfrentados","title":"10. Desafios Enfrentados","text":"<ul> <li>Heterogeneidade e esparsidade de POIs (v\u00e1rias colunas 100% ausentes em subset), exigindo exclus\u00e3o ou imputa\u00e7\u00e3o agressiva.</li> <li>Balancear defasagens e MAs sem aumentar demais a dimensionalidade (risco de overfit).</li> <li>Ajustar a escala do alvo via <code>log1p</code> para reduzir a influ\u00eancia de extremos.</li> </ul>"},{"location":"RELATORIO/#11-conclusoes","title":"11. Conclus\u00f5es","text":"<ul> <li>O MLP com pr\u00e9-processamento adequado atinge desempenho competitivo e est\u00e1vel com splits temporais.</li> <li>A informa\u00e7\u00e3o temporal (defasagens/MA) de <code>amount</code>, <code>price</code> e <code>area</code> \u00e9 central; vizinhan\u00e7a e mercado de usados agregam ganho adicional.</li> <li>Para ganhos futuros, recomenda-se explorar: GBDTs (LightGBM/XGBoost), modelos sequenciais (LSTM/TemporalConv), embeddings de setor e aten\u00e7\u00e3o ao leakage.</li> </ul>"},{"location":"RELATORIO/#12-reprodutibilidade","title":"12. Reprodutibilidade","text":"<ul> <li>Pipeline final salvo em <code>final_pipe.joblib</code>.</li> <li>Gera\u00e7\u00e3o de <code>submission.csv</code> (colunas <code>id</code>, <code>new_house_transaction_amount</code>) contemplada no notebook.</li> </ul>"},{"location":"analysis/","title":"Analise de Resultados: v1, v2 e v3","text":""},{"location":"analysis/#1-dados-e-validacao","title":"1. Dados e Validacao","text":"Aspecto v1 v2 v3 Features 63 27 27 Observacoes Treino 5.305 5.433 5.433 Observacoes Teste 1.060 OOF (5.433) OOF (5.433) Validacao TimeSeriesSplit GroupKFold (95 setores) TimeSeriesSplit + Seeds Combinacoes Testadas 1 1 36"},{"location":"analysis/#2-evolucao-das-metricas","title":"2. Evolucao das Metricas","text":""},{"location":"analysis/#rmse","title":"RMSE","text":"<pre><code>v1: 38.937,57\nv2:  7.547,03\nv3: 19.991,72\n</code></pre>"},{"location":"analysis/#mae","title":"MAE","text":"<pre><code>v1: 13.565,70\nv2:  1.626,75\nv3:  (nao reportado)\n</code></pre>"},{"location":"analysis/#r2","title":"R2","text":"<pre><code>v1: 0,5513\nv2: 0,9763\nv3: (nao reportado)\n</code></pre>"},{"location":"analysis/#competition-score","title":"Competition Score","text":"<pre><code>v2: 0,9530\nv3: 0,7821\n</code></pre>"},{"location":"analysis/#3-mudancas-por-versao","title":"3. Mudancas por Versao","text":""},{"location":"analysis/#v1-v2","title":"V1 -&gt; V2","text":"<ul> <li>Feature engineering avancado (lags, medias moveis, interacoes)</li> <li>GroupKFold por setor</li> <li>Ajustes de hiperparametros (tanh, batch maior, lr maior)</li> </ul> <p>Resultado: grandes melhorias em RMSE, MAE e R2.</p>"},{"location":"analysis/#v2-v3","title":"V2 -&gt; V3","text":"<ul> <li>Busca de hiperparametros (36 combinacoes, multiplos seeds)</li> <li>Validacao mais rigida com TimeSeriesSplit</li> <li>Regularizacao maior e lr menor</li> </ul> <p>Resultado: piora nas metricas principais versus v2.</p>"},{"location":"analysis/#4-analise-por-versao","title":"4. Analise por Versao","text":""},{"location":"analysis/#v1-linha-de-base","title":"v1: Linha de base","text":"<ul> <li>Simples, sem engenharia de features</li> <li>Valida\u00e7ao temporal generica</li> </ul>"},{"location":"analysis/#v2-avanco-significativo","title":"v2: Avanco significativo","text":"<ul> <li>Captura dinamica temporal, sazonalidade e interacoes</li> <li>Forte estabilidade e alta explicacao de variancia</li> </ul>"},{"location":"analysis/#v3-busca-de-hiperparametros","title":"v3: Busca de hiperparametros","text":"<ul> <li>Maior complexidade, mas validacao menos adequada</li> <li>Regularizacao e estrategia de busca nao superaram v2</li> </ul>"},{"location":"analysis/#5-conclusoes","title":"5. Conclusoes","text":"<ul> <li>v2 e o melhor modelo para producao</li> <li>v3 nao supera v2 nas metricas principais</li> <li>Futuro: manter GroupKFold, explorar XGBoost/LightGBM, ensembles e features adicionais</li> </ul>"},{"location":"comparison/","title":"Relat\u00f3rio de Compara\u00e7\u00e3o","text":""},{"location":"comparison/#resumo","title":"Resumo","text":"<p>An\u00e1lise da evolu\u00e7\u00e3o de v1, v2 e v3, impactos de engenharia de features, valida\u00e7\u00e3o e busca de hiperpar\u00e2metros.</p>"},{"location":"comparison/#comparacao-tecnica","title":"Compara\u00e7\u00e3o T\u00e9cnica","text":""},{"location":"comparison/#v1-linha-de-base","title":"v1: Linha de base","text":"<ul> <li>MLP simples, valida\u00e7\u00e3o temporal</li> <li>Sem defasagens ou m\u00e9dias m\u00f3veis</li> </ul>"},{"location":"comparison/#v2-melhoria-significativa","title":"v2: Melhoria significativa","text":"<ul> <li>Defasagens, m\u00e9dias m\u00f3veis, intera\u00e7\u00f5es, features temporais</li> <li>GroupKFold por setor</li> <li>Diagn\u00f3sticos e m\u00e9tricas por fold</li> </ul>"},{"location":"comparison/#v3-otimizacao-de-hiperparametros","title":"v3: Otimiza\u00e7\u00e3o de hiperpar\u00e2metros","text":"<ul> <li>Grade reduzida com m\u00faltiplos seeds</li> <li>Safe MSE e clipping para estabilidade</li> <li>Valida\u00e7\u00e3o TimeSeriesSplit</li> </ul>"},{"location":"comparison/#tabela-comparativa","title":"Tabela comparativa","text":"Aspecto v1 v2 v3 Features B\u00e1sicas 27 (defasagens/MA) 27 Valida\u00e7\u00e3o TimeSeriesSplit GroupKFold TimeSeriesSplit+Seeds Arquitetura Fixa (256,128,64) Fixa Busca autom\u00e1tica Prote\u00e7\u00e3o Num\u00e9rica N\u00e3o N\u00e3o Sim Tempo de Treino ~10 min ~15 min ~2-3 horas"},{"location":"comparison/#ganhos-esperados","title":"Ganhos esperados","text":"<ul> <li>v1 -&gt; v2: +15 a 25 por cento</li> <li>v2 -&gt; v3: +5 a 15 por cento (dependente de configura\u00e7\u00e3o)</li> </ul>"},{"location":"comparison/#conclusao","title":"Conclus\u00e3o","text":"<ul> <li>v2 \u00e9 recomendado para produ\u00e7\u00e3o pelo equil\u00edbrio entre desempenho, estabilidade e simplicidade</li> <li>v3 pode ser explorado para competi\u00e7\u00f5es ou cen\u00e1rios onde maior tempo de treino \u00e9 aceit\u00e1vel</li> </ul>"},{"location":"conclusion/","title":"Conclus\u00e3o","text":"<p>Este projeto se prop\u00f4s a desenvolver e avaliar um modelo de regress\u00e3o para a previs\u00e3o de demanda no mercado imobili\u00e1rio chin\u00eas, utilizando uma abordagem incremental que culminou na compara\u00e7\u00e3o de tr\u00eas vers\u00f5es de um Perceptron Multicamadas (MLP). A an\u00e1lise dos resultados n\u00e3o apenas permitiu a identifica\u00e7\u00e3o de um modelo superior, mas tamb\u00e9m gerou insights valiosos sobre a metodologia de modelagem para dados temporais e hier\u00e1rquicos.</p>"},{"location":"conclusion/#sintese-dos-principais-achados","title":"S\u00edntese dos Principais Achados","text":"<p>A evolu\u00e7\u00e3o do Modelo v1 ao v3 demonstrou tr\u00eas li\u00e7\u00f5es:</p> <ol> <li> <p>A Superioridade da Engenharia de Atributos: A transi\u00e7\u00e3o do Modelo v1 para o v2, que introduziu atributos baseados em defasagens temporais (lags) e m\u00e9dias m\u00f3veis (moving averages), resultou em uma melhoria dr\u00e1stica no desempenho. A redu\u00e7\u00e3o de 80,6% no RMSE e o aumento de 77 pontos percentuais no coeficiente de determina\u00e7\u00e3o (\\(R^2\\)) demonstram que uma engenharia de atributos bem fundamentada, capaz de capturar as din\u00e2micas intr\u00ednsecas dos dados, possui um impacto superior ao de ajustes finos na arquitetura do modelo.</p> </li> <li> <p>A Import\u00e2ncia da Estrat\u00e9gia de Valida\u00e7\u00e3o: A escolha de uma estrat\u00e9gia de valida\u00e7\u00e3o adequada ao problema foi crucial. O Modelo v2, que utilizou <code>GroupKFold</code> para respeitar a estrutura hier\u00e1rquica dos setores, apresentou uma generaliza\u00e7\u00e3o muito superior ao Modelo v3, que retornou a uma abordagem de <code>TimeSeriesSplit</code>. Isso evidencia que a preven\u00e7\u00e3o de vazamento de dados (data leakage) e a representa\u00e7\u00e3o correta da estrutura dos dados no processo de valida\u00e7\u00e3o s\u00e3o t\u00e3o cr\u00edticas quanto a pr\u00f3pria arquitetura do modelo.</p> </li> <li> <p>Os Limites da Otimiza\u00e7\u00e3o de Hiperpar\u00e2metros: O Modelo v3, apesar de empregar uma busca sistem\u00e1tica por hiperpar\u00e2metros, n\u00e3o apenas falhou em superar o Modelo v2, como tamb\u00e9m apresentou um desempenho inferior em m\u00e9tricas de generaliza\u00e7\u00e3o (RMSE e Competition Score). Este resultado exemplifica um caso cl\u00e1ssico de retornos decrescentes, onde a complexidade adicional e o custo computacional n\u00e3o se traduziram em ganhos de performance, indicando um sobreajuste ao conjunto de valida\u00e7\u00e3o.</p> </li> </ol>"},{"location":"conclusion/#recomendacoes-e-justificativa","title":"Recomenda\u00e7\u00f5es e Justificativa","text":"<p>Com base na an\u00e1lise comparativa, o Modelo v2 \u00e9 recomendado como a solu\u00e7\u00e3o final. Pelos seguintes motivos:</p> <ul> <li>Desempenho de Generaliza\u00e7\u00e3o: Obteve o menor RMSE (7.547,03) e o segundo maior Competition Score (0,46430), bem pr\u00f3ximo do score de v3, mas com menor RMSE, o que significa que ele seria melhor em prever dados nunca vistos.</li> <li>Capacidade Explicativa: Alcan\u00e7ou um \\(R^2\\) de 0,9763, explicando 97,6% da vari\u00e2ncia da vari\u00e1vel alvo.</li> <li>Efici\u00eancia Computacional: Exige um tempo de treinamento moderado (15-20 minutos).</li> <li>Interpretabilidade: As 27 features projetadas possuem um significado claro e conectado ao dom\u00ednio do problema.</li> </ul>"},{"location":"metrics/","title":"Metrics","text":""},{"location":"metrics/#metricas-de-desempenho","title":"M\u00e9tricas de Desempenho","text":""},{"location":"metrics/#introducao","title":"Introdu\u00e7\u00e3o","text":"<p>Este documento padroniza as m\u00e9tricas usadas para avaliar os modelos e orienta a interpreta\u00e7\u00e3o de resultados.</p>"},{"location":"metrics/#rmse-root-mean-squared-error","title":"RMSE (Root Mean Squared Error)","text":"<p>F\u00f3rmula: $$ \\text{RMSE} = \\sqrt{\\frac{1}{n} \\sum_{i=1}^{n} (y_{\\text{true}} - y_{\\text{pred}})^2} $$</p> <ul> <li>Penaliza erros grandes</li> <li>Mesma escala da vari\u00e1vel alvo</li> <li>Menor \u00e9 melhor</li> </ul>"},{"location":"metrics/#mae-mean-absolute-error","title":"MAE (Mean Absolute Error)","text":"<p>F\u00f3rmula: $$ \\text{MAE} = \\frac{1}{n} \\sum_{i=1}^{n} |y_{\\text{true}} - y_{\\text{pred}}| $$</p> <ul> <li>Erro t\u00edpico, robusto a outliers</li> <li>Mesma escala da vari\u00e1vel alvo</li> <li>Menor \u00e9 melhor</li> </ul>"},{"location":"metrics/#r2-coeficiente-de-determinacao","title":"\\(R^2\\) (Coeficiente de Determina\u00e7\u00e3o)","text":"<p>F\u00f3rmula: $$ R^2 = 1 - \\frac{SS_{\\text{res}}}{SS_{\\text{tot}}} $$</p> <ul> <li>Propor\u00e7\u00e3o da vari\u00e2ncia explicada</li> <li>Intervalo t\u00edpico [0, 1]</li> <li>Maior \u00e9 melhor</li> </ul>"},{"location":"metrics/#competition-score-metrica-customizada","title":"Competition Score (m\u00e9trica customizada)","text":"<p>Pseudo-c\u00f3digo:</p> <pre><code>import numpy as np\n\ndef competition_score(y_true, y_pred):\n    den = np.where(np.abs(y_true) &lt; 1e-9, 1.0, np.abs(y_true))\n    ape = np.abs(y_true - y_pred) / den\n    frac_le1 = float(np.mean(ape &lt;= 1.0))\n    if 1.0 - frac_le1 &gt; 0.30:\n        return {\"score\": 0.0, \"frac_le1\": frac_le1, \"scaled_mape\": float('inf')}\n    mask = ape &lt;= 1.0\n    if not np.any(mask):\n        return {\"score\": 0.0, \"frac_le1\": 0.0, \"scaled_mape\": float('inf')}\n    mape_subset = float(np.mean(ape[mask]))\n    scaled_mape = float(mape_subset / max(frac_le1, 1e-12))\n    return {\"score\": float(1.0 - scaled_mape), \"frac_le1\": frac_le1, \"scaled_mape\": scaled_mape}\n</code></pre> <ul> <li>Espec\u00edfica do dom\u00ednio da competi\u00e7\u00e3o</li> <li>Intervalo [0, 1]</li> <li>Maior \u00e9 melhor</li> </ul>"},{"location":"metrics/#como-comparar-modelos-sem-a-competicao","title":"Como comparar modelos sem a competi\u00e7\u00e3o","text":"<ul> <li>Priorize \\(R^2\\) para compara\u00e7\u00e3o universal</li> <li>Use RMSE e MAE para interpretar a magnitude e robustez do erro</li> <li>Avalie a estabilidade entre folds (desvio padr\u00e3o das m\u00e9tricas)</li> </ul>"},{"location":"metrics/#tabela-de-referencia","title":"Tabela de refer\u00eancia","text":"M\u00e9trica Escala Melhor RMSE Mesma da vari\u00e1vel Menor MAE Mesma da vari\u00e1vel Menor \\(R^2\\) [0,1] Maior Competition Score [0,1] Maior"},{"location":"overview/","title":"Resumo Executivo","text":"<p>A evolu\u00e7\u00e3o dos modelos de previs\u00e3o de demanda imobili\u00e1ria demonstra que o modelo v2 \u00e9 o melhor candidato para produ\u00e7\u00e3o. Ele representa uma melhoria substancial em rela\u00e7\u00e3o ao baseline v1, enquanto o modelo v3, apesar de buscar hiperpar\u00e2metros, n\u00e3o superou o v2 em consist\u00eancia e m\u00e9tricas principais.</p>"},{"location":"overview/#comparacao-rapida","title":"Compara\u00e7\u00e3o r\u00e1pida","text":"<pre><code>                    v1              v2              v3\n                    -------------------------------\nRMSE                38.937,57  -&gt;   7.547,03   -&gt;  19.991,72\nMAE                 13.565,70  -&gt;   1.626,75   -&gt;  (n\u00e3o reportado)\n$R^2$                  0,5513     -&gt;   0,9763     -&gt;  (n\u00e3o reportado)\nComp. Score         (N/A)      -&gt;   0,9530     -&gt;  0,7821\n\nFeatures            63              27              27\nValida\u00e7\u00e3o           TimeSeries      GroupKFold      TimeSeries\nHiperpar\u00e2metros     Fixo            Fixo            Otimizado (36)\n\nRecomenda\u00e7\u00e3o        N\u00e3o             USAR ESTE       N\u00e3o\n</code></pre>"},{"location":"overview/#metricas-principais","title":"M\u00e9tricas principais","text":"<ul> <li>RMSE: v1 -&gt; v2 reduz em 80,6%; v2 -&gt; v3 piora</li> <li>MAE: v1 -&gt; v2 reduz em 88,0%</li> <li>\\(R^2\\): v2 explica 97,63% da vari\u00e2ncia</li> <li>Competition Score: v2 = 0,9530; v3 = 0,7821</li> </ul>"},{"location":"overview/#por-que-o-v2-e-superior","title":"Por que o v2 \u00e9 superior","text":"<ol> <li>Feature Engineering espec\u00edfico para s\u00e9ries temporais (defasagens, m\u00e9dias m\u00f3veis, intera\u00e7\u00f5es)</li> <li>Valida\u00e7\u00e3o por setor (GroupKFold), apropriada para dados hier\u00e1rquicos</li> <li>Arquitetura equilibrada e hiperpar\u00e2metros est\u00e1veis</li> </ol>"},{"location":"overview/#por-que-o-v3-nao-superou-o-v2","title":"Por que o v3 n\u00e3o superou o v2","text":"<ol> <li>Mudan\u00e7a de valida\u00e7\u00e3o para TimeSeriesSplit (menos adequada ao problema)</li> <li>Regulariza\u00e7\u00e3o maior levou a poss\u00edvel underfitting</li> <li>Busca de hiperpar\u00e2metros n\u00e3o generalizou</li> </ol>"},{"location":"overview/#recomendacao","title":"Recomenda\u00e7\u00e3o","text":"<p>Usar o modelo v2 em produ\u00e7\u00e3o. Melhorias futuras devem focar em dados, features e modelos alternativos (p. ex., gradient boosting ou ensembles), n\u00e3o apenas em hiperpar\u00e2metros do MLP.</p>"},{"location":"project/","title":"Contexto do Projeto","text":""},{"location":"project/#disciplina","title":"Disciplina","text":"<p>Artificial Neural Networks and Deep Learning - Redes Neurais (2025.2) Projeto 2: Regress\u00e3o com MLP</p>"},{"location":"project/#competicao-kaggle","title":"Competi\u00e7\u00e3o Kaggle","text":""},{"location":"project/#informacoes-gerais","title":"Informa\u00e7\u00f5es Gerais","text":"<ul> <li>Nome: Real Estate Demand Prediction Challenge</li> <li>Plataforma: Kaggle</li> <li>Per\u00edodo: Tr\u00eas meses de dura\u00e7\u00e3o</li> <li>Status: Em andamento</li> </ul>"},{"location":"project/#objetivo-principal","title":"Objetivo Principal","text":"<p>Desenvolver um modelo de regress\u00e3o neural (MLP) que prev\u00ea o volume mensal de transa\u00e7\u00f5es de propriedades residenciais no mercado chin\u00eas para cada setor, usando dados hist\u00f3ricos de 2019 a 2024.</p>"},{"location":"project/#dados-e-granularidade","title":"Dados e Granularidade","text":""},{"location":"project/#cobertura","title":"Cobertura","text":"<ul> <li>Per\u00edodo: Janeiro de 2019 a julho de 2024 (67 meses)</li> <li>Setores: 95 setores distintos</li> <li>Observa\u00e7\u00f5es: 5.433 registros (setor + m\u00eas)</li> <li>Vari\u00e1vel Alvo: new_house_transaction_amount (em 10 mil Yuan)</li> </ul>"},{"location":"project/#metrica-de-avaliacao-kaggle","title":"M\u00e9trica de Avalia\u00e7\u00e3o (Kaggle)","text":""},{"location":"project/#estrategia-em-duas-etapas","title":"Estrat\u00e9gia em Duas Etapas","text":""},{"location":"project/#estagio-1","title":"Est\u00e1gio 1","text":"<p>Se mais de 30% das amostras tiverem erro percentual absoluto (APE) &gt; 100%: - Score = 0 imediatamente</p>"},{"location":"project/#estagio-2","title":"Est\u00e1gio 2","text":"<p>Caso contr\u00e1rio, calcula-se MAPE apenas para predi\u00e7\u00f5es com APE \u2264 100%:</p> \\[ D = \\\\left\\\\{\\frac{|y_i^{pred} - y_i^{true}|}{|y_i^{true}|} : \\text{APE} \\leq 1\\\\right\\\\} \\] \\[ \\text{Score} = 1 - \\frac{\\text{average}(D)}{|D| / n} \\]"},{"location":"project/#metricas-de-regressao-projeto","title":"M\u00e9tricas de Regress\u00e3o (Projeto)","text":"<p>Para avalia\u00e7\u00e3o do projeto, calcular:</p> <ul> <li>MAE (Mean Absolute Error): Erro m\u00e9dio absoluto</li> <li>MAPE (Mean Absolute Percentage Error): Erro percentual absoluto m\u00e9dio</li> <li>MSE (Mean Squared Error): Erro quadr\u00e1tico m\u00e9dio</li> <li>RMSE (Root Mean Squared Error): Raiz do erro quadr\u00e1tico m\u00e9dio</li> <li>\\(R^2\\) (Coeficiente de Determina\u00e7\u00e3o): Propor\u00e7\u00e3o de vari\u00e2ncia explicada</li> </ul>"},{"location":"project/#formato-de-submissao-kaggle","title":"Formato de Submiss\u00e3o (Kaggle)","text":""},{"location":"project/#arquivo-requerido","title":"Arquivo Requerido","text":"<p>Nome: submission.csv</p> <p>Colunas:</p> <ul> <li><code>id</code>: Formato \"YYYY MMM_sector N\" (ex: \"2024 Aug_sector 1\")</li> <li><code>new_house_transaction_amount</code>: Valor predito em 10 mil Yuan</li> </ul>"},{"location":"project/#requisitos","title":"Requisitos","text":"<ul> <li>Preservar ordem exata de test.csv</li> <li>Incluir header</li> <li>Arquivo CSV com exatamente 2 colunas</li> </ul>"},{"location":"project/#desafios-principais","title":"Desafios Principais","text":""},{"location":"project/#1-distribuicao-temporal-complexa","title":"1. Distribui\u00e7\u00e3o Temporal Complexa","text":"<p>O mercado imobili\u00e1rio chin\u00eas apresenta padr\u00f5es sazonais:</p> <ul> <li>Picos durante festas nacionais (Ano Novo Chin\u00eas)</li> <li>Varia\u00e7\u00e3o por cidade e tier (tier-1, tier-2, etc.)</li> <li>Efeitos de pol\u00edticas governamentais de controle de pre\u00e7o</li> </ul>"},{"location":"project/#2-heterogeneidade-geografica","title":"2. Heterogeneidade Geogr\u00e1fica","text":"<p>95 setores com din\u00e2micas pr\u00f3prias:</p> <ul> <li>Mercados consolidados vs emergentes</li> <li>Varia\u00e7\u00f5es significativas em pre\u00e7o, volume e tend\u00eancias</li> <li>Necessidade de valida\u00e7\u00e3o respeitando estrutura hier\u00e1rquica</li> </ul>"},{"location":"project/#3-escalas-e-distribuicoes","title":"3. Escalas e Distribui\u00e7\u00f5es","text":"<ul> <li>Vari\u00e1vel alvo altamente assim\u00e9trica</li> <li>Valores variando em m\u00faltiplas ordens de magnitude</li> <li>Presen\u00e7a de zeros leg\u00edtimos (per\u00edodos sem transa\u00e7\u00f5es)</li> </ul>"},{"location":"project/#4-dados-externos-limitados","title":"4. Dados Externos Limitados","text":"<ul> <li>Indicadores macroecon\u00f4micos indispon\u00edveis</li> <li>Dados de POI (Point of Interest) em sua maioria ausentes</li> <li>Conhecimento espec\u00edfico do mercado chin\u00eas necess\u00e1rio</li> </ul>"},{"location":"project/#solucao-proposta","title":"Solu\u00e7\u00e3o Proposta","text":""},{"location":"project/#abordagem-em-tres-versoes","title":"Abordagem em Tr\u00eas Vers\u00f5es","text":"<ol> <li>v1 - Baseline: MLP simples para estabelecer refer\u00eancia</li> <li>v2 - Feature Engineering: Lags, m\u00e9dias m\u00f3veis e valida\u00e7\u00e3o por setor</li> <li>v3 - Otimiza\u00e7\u00e3o: Busca sistem\u00e1tica de hiperpar\u00e2metros</li> </ol>"},{"location":"project/#arquitetura","title":"Arquitetura","text":"<p>Todas as vers\u00f5es usam MLPRegressor (redes neurais artificiais) com 3 camadas ocultas.</p> <p>Pr\u00f3xima Se\u00e7\u00e3o: Dataset e Prepara\u00e7\u00e3o</p>"},{"location":"references/","title":"Referencias","text":""},{"location":"references/#metodologia-e-tecnicas","title":"Metodologia e Tecnicas","text":""},{"location":"references/#machine-learning-e-regressao","title":"Machine Learning e Regressao","text":"<ol> <li>Scikit-learn Documentation</li> <li>MLPRegressor: https://scikit-learn.org/stable/modules/generated/sklearn.neural_network.MLPRegressor.html</li> <li> <p>Cross-validation: https://scikit-learn.org/stable/modules/cross_validation.html</p> </li> <li> <p>Series Temporais e Feature Engineering</p> </li> <li>Hyndman, R. J., &amp; Athanasopoulos, G. (2021). Forecasting: principles and practice.</li> <li>Brownlee, J. (2017). Deep Learning for Time Series Forecasting.</li> </ol>"},{"location":"references/#validacao-cruzada-hierarquica","title":"Validacao Cruzada Hierarquica","text":"<ol> <li>GroupKFold Validation</li> <li>Bergstra, J., &amp; Bengio, Y. (2012). Random Search for Hyper-Parameter Optimization.</li> <li>Scikit-learn GroupKFold: https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.GroupKFold.html</li> </ol>"},{"location":"references/#mercado-imobiliario-chines","title":"Mercado Imobiliario Chines","text":""},{"location":"references/#pesquisa-de-dominio","title":"Pesquisa de Dominio","text":"<ol> <li>Real Estate Market Analysis</li> <li>Knight Frank Research: China Property Market Insights</li> <li>China Index Academy (CIA): Quarterly Reports</li> <li>Lianjia Databank: https://www.lianjia.com/</li> </ol>"},{"location":"references/#politica-e-regulacao","title":"Politica e Regulacao","text":"<ol> <li>Controle de Precos</li> <li>Documentos sobre price controls em Tier-1 cities (Beijing, Shanghai)</li> <li>Efeitos de politicas habitacionais na demanda</li> </ol>"},{"location":"references/#metricas-e-avaliacao","title":"Metricas e Avaliacao","text":""},{"location":"references/#error-metrics","title":"Error Metrics","text":"<ol> <li>RMSE, MAE, R-squared</li> <li>Jolliffe, I. T., &amp; Stephenson, D. B. (2012). Forecast verification: a practitioner's guide.</li> <li>Murphy, A. H. (1988). Skill scores based on the mean square error and their relationships to the correlation coefficient.</li> </ol>"},{"location":"references/#custom-metrics","title":"Custom Metrics","text":"<ol> <li>MAPE and APE</li> <li>Kim, S., &amp; Kim, H. (2016). A new metric of absolute percentage error for intermittent demand forecasts.</li> </ol>"},{"location":"references/#bibliotecas-python","title":"Bibliotecas Python","text":""},{"location":"references/#core","title":"Core","text":"<ul> <li>NumPy: Numerical computing (https://numpy.org/)</li> <li>Pandas: Data manipulation (https://pandas.pydata.org/)</li> <li>Scikit-learn: Machine learning (https://scikit-learn.org/)</li> </ul>"},{"location":"references/#visualization","title":"Visualization","text":"<ul> <li>Matplotlib: Plotting library (https://matplotlib.org/)</li> <li>Seaborn: Statistical visualization (https://seaborn.pydata.org/)</li> </ul>"},{"location":"references/#execution","title":"Execution","text":"<ul> <li>Jupyter: Interactive notebooks (https://jupyter.org/)</li> <li>nbconvert: Notebook conversion (https://nbconvert.readthedocs.io/)</li> </ul>"},{"location":"references/#dados-e-datasets","title":"Dados e Datasets","text":""},{"location":"references/#fonte-primaria","title":"Fonte Primaria","text":"<ul> <li>Kaggle Competition: Real Estate Demand Prediction</li> <li>Dataset: China Housing Transactions 2019-2024</li> </ul>"},{"location":"references/#preparacao","title":"Preparacao","text":"<ul> <li>Documentacao interna: 1_analise_exploratoria.ipynb</li> <li>Pipeline: 2_preprocess.ipynb</li> </ul>"},{"location":"references/#recursos-adicionais","title":"Recursos Adicionais","text":""},{"location":"references/#modelos-alternativos","title":"Modelos Alternativos","text":"<ol> <li>Gradient Boosting</li> <li>LightGBM: https://lightgbm.readthedocs.io/</li> <li> <p>XGBoost: https://xgboost.readthedocs.io/</p> </li> <li> <p>Deep Learning</p> </li> <li>PyTorch: https://pytorch.org/</li> <li>TensorFlow/Keras: https://www.tensorflow.org/</li> </ol>"},{"location":"references/#ensemble-methods","title":"Ensemble Methods","text":"<ol> <li>Stacking e Blending<ul> <li>Wolpert, D. H. (1992). Stacked generalization.</li> <li>Breiman, L. (1996). Stacked regressions.</li> </ul> </li> </ol>"},{"location":"references/#documentacao-interna","title":"Documentacao Interna","text":"<ul> <li><code>metricas_desempenho.md</code>: Definicoes de metricas</li> <li><code>comparacao.md</code>: Comparacao tecnica entre versoes</li> <li><code>RELATORIO.md</code>: Relatorio consolidado</li> </ul> <p>Ultima Atualizacao: 2025-10-25 Proxima Secao: Conclusoes</p>"},{"location":"workflow/","title":"Fluxo de Execucao","text":""},{"location":"workflow/#introducao","title":"Introducao","text":"<p>Este documento descreve como executar o projeto completo: notebooks, metricas e relatorios.</p>"},{"location":"workflow/#pre-requisitos","title":"Pr\u00e9-requisitos","text":""},{"location":"workflow/#ambiente-python","title":"Ambiente Python","text":"<pre><code>python --version  # 3.8+\npip install -r requirements.txt\n</code></pre>"},{"location":"workflow/#dependencias","title":"Depend\u00eancias","text":"<pre><code>numpy\npandas\nscikit-learn\nmatplotlib\nseaborn\njupyter\nnbconvert\n</code></pre>"},{"location":"workflow/#execucao-dos-notebooks","title":"Execucao dos Notebooks","text":""},{"location":"workflow/#opcao-1-sequencial-recomendado","title":"Opcao 1: Sequencial (Recomendado)","text":"<pre><code># Terminal 1\njupyter nbconvert --to notebook --execute 3_training_v1.ipynb --output 3_training_v1.ipynb\n\n# Aguarde conclusao (~10 min)\n# Terminal 2\njupyter nbconvert --to notebook --execute 3_training_v2.ipynb --output 3_training_v2.ipynb\n\n# Aguarde conclusao (~15 min)\n# Terminal 3\njupyter nbconvert --to notebook --execute 3_training_v3.ipynb --output 3_training_v3.ipynb\n\n# Aguarde conclusao (~2-3 horas)\n</code></pre>"},{"location":"workflow/#opcao-2-paralela-avancado","title":"Opcao 2: Paralela (Avancado)","text":"<pre><code>python executar_tudo_jupyter.py\n</code></pre> <p>Executa os tres notebooks em paralelo se forem independentes.</p>"},{"location":"workflow/#geracao-de-metricas","title":"Geracao de Metricas","text":""},{"location":"workflow/#arquivos-gerados-automaticamente","title":"Arquivos Gerados Automaticamente","text":"<p>Cada notebook salva metricas em JSON:</p> <pre><code>3_training_v1.ipynb  \u2192  metricas_v1.json\n3_training_v2.ipynb  \u2192  metricas_v2.json\n3_training_v3.ipynb  \u2192  metricas_v3.json\n</code></pre>"},{"location":"workflow/#verificacao","title":"Verificacao","text":"<pre><code>ls -lh metricas_*.json\n</code></pre> <p>Deve listar 3 arquivos.</p>"},{"location":"workflow/#geracao-de-relatorio-comparativo","title":"Geracao de Relatorio Comparativo","text":""},{"location":"workflow/#script-de-comparacao","title":"Script de Comparacao","text":"<pre><code>python comparar_metricas.py\n</code></pre> <p>Produz: <code>relatorio_comparacao_YYYYMMDD_HHMMSS.txt</code></p>"},{"location":"workflow/#saida-esperada","title":"Saida Esperada","text":"<pre><code>================================================================================\nCOMPARACAO DE METRICAS: v1 vs v2 vs v3\n================================================================================\n\n1. ROOT MEAN SQUARED ERROR (RMSE)\nv1:     38.937,57  (Baseline)\nv2:      7.547,03  (-80,6%)  *** MELHOR ***\nv3:     19.991,72  (+165% vs v2)\n\n...\n\nRANKING FINAL\n================================================================================\n1\u00ba lugar: v2 (R2 = 0,9763) *** RECOMENDADO ***\n2\u00ba lugar: v1 (R2 = 0,5513)\n</code></pre>"},{"location":"workflow/#estrutura-de-saidas","title":"Estrutura de Sa\u00eddas","text":""},{"location":"workflow/#modelos-treinados","title":"Modelos Treinados","text":"<pre><code>mlp_model_v1.joblib\nmlp_model_v2.joblib\nmlp_model_v3.joblib\n</code></pre>"},{"location":"workflow/#dados-de-metricas","title":"Dados de Metricas","text":"<pre><code>metricas_v1.json   (RMSE, MAE, R2 treino/teste)\nmetricas_v2.json   (OOF, por-fold, Competition Score)\nmetricas_v3.json   (melhor config, grid search)\n</code></pre>"},{"location":"workflow/#predicoes","title":"Predicoes","text":"<pre><code>submission_v1.csv\nsubmission_v2.csv\nsubmission_v3.csv\n</code></pre>"},{"location":"workflow/#troubleshooting","title":"Troubleshooting","text":""},{"location":"workflow/#problema-notebook-nao-executado-completamente","title":"Problema: Notebook nao executado completamente","text":"<p>Solucao: - Verificar se ha dados faltantes em arquivos .npy - Revisar se seed 42 esta definido corretamente - Checar se ha erro de memoria (reducir batch size)</p>"},{"location":"workflow/#problema-json-nao-encontrado","title":"Problema: JSON nao encontrado","text":"<p>Solucao: - Confirmar que notebook chegou na ultima celula - Executar manualmente a ultima celula se necessario - Verificar se arquivo foi salvo no diretorio correto</p>"},{"location":"workflow/#problema-comparacao-falha","title":"Problema: Comparacao falha","text":"<p>Solucao: - Verificar sintaxe do JSON: <code>python -m json.tool metricas_v1.json</code> - Confirmar que todas tres metricas existem - Revisar se valores nao sao None ou NaN</p>"},{"location":"workflow/#automacao-opcional","title":"Automacao (Opcional)","text":""},{"location":"workflow/#script-bash-para-execucao-completa","title":"Script Bash para Execucao Completa","text":"<pre><code>#!/bin/bash\necho \"Iniciando pipeline...\"\njupyter nbconvert --to notebook --execute 3_training_v1.ipynb\njupyter nbconvert --to notebook --execute 3_training_v2.ipynb\njupyter nbconvert --to notebook --execute 3_training_v3.ipynb\npython comparar_metricas.py\necho \"Pipeline completo!\"\n</code></pre>"},{"location":"workflow/#tempo-estimado","title":"Tempo Estimado","text":"Etapa Tempo v1 Execucao 10-15 min v2 Execucao 15-20 min v3 Execucao 2-3 horas Comparacao 2-5 seg Total ~3-4 horas <p>Proxima Secao: Referencias</p>"},{"location":"dataset/eda/","title":"Explora\u00e7\u00e3o Inicial (EDA)","text":""},{"location":"dataset/eda/#estatisticas-descritivas","title":"Estat\u00edsticas Descritivas","text":""},{"location":"dataset/eda/#variavel-alvo-amount_new_house_transactions","title":"Vari\u00e1vel Alvo: amount_new_house_transactions","text":"<pre><code>Descri\u00e7\u00e3o estat\u00edstica (em log1p):\n- M\u00e9dia: 9.5\n- Desvio Padr\u00e3o: 2.1\n- M\u00ednimo: 0.0 (log1p(0))\n- M\u00e1ximo: 14.2 (log1p(~1.3M yuan))\n- Assimetria: 0.8 (reduzida pela transforma\u00e7\u00e3o)\n</code></pre> <p>Distribui\u00e7\u00e3o original: - Altamente assim\u00e9trica (skewness original &gt; 2) - Mitigada por log1p para normaliza\u00e7\u00e3o - Cont\u00e9m aprox. 5-10% de zeros</p> <p></p> <p></p>"},{"location":"dataset/eda/#features-numericas-principais","title":"Features Num\u00e9ricas Principais","text":"Feature M\u00e9dia Desvio Padr\u00e3o M\u00ednimo M\u00e1ximo price 12.500 8.200 2.000 45.000 area 850.000 620.000 50.000 5.000.000 num 120 150 5 800"},{"location":"dataset/eda/#analise-exploratoria","title":"An\u00e1lise Explorat\u00f3ria","text":""},{"location":"dataset/eda/#sazonalidade","title":"Sazonalidade","text":"<ul> <li>Picos em fevereiro/mar\u00e7o (p\u00f3s Ano Novo Chin\u00eas)</li> <li>Vale em junho/julho (redu\u00e7\u00e3o de demanda)</li> <li>Padr\u00f5es consistentes ano a ano</li> </ul>"},{"location":"dataset/eda/#heterogeneidade-setorial","title":"Heterogeneidade Setorial","text":"<ul> <li>Setores tier-1: maiores volumes, menor volatilidade</li> <li>Setores emergentes: menor volume, maior variabilidade</li> <li>Coeficiente de varia\u00e7\u00e3o por setor: 0,3 a 1,8</li> </ul>"},{"location":"dataset/eda/#correlacoes","title":"Correla\u00e7\u00f5es","text":"<ul> <li>price \u00d7 area: r = 0,72 (forte)</li> <li>price \u00d7 num: r = -0,18 (fraca negativa)</li> <li>area \u00d7 amount: r = 0,65 (moderada)</li> </ul>"},{"location":"dataset/eda/#qualidade-dos-dados","title":"Qualidade dos Dados","text":"<ul> <li>Faltantes: &lt;1% em features principais</li> <li>Outliers: ~2% em algumas vari\u00e1veis (retidos para capturar extremos)</li> <li>Consist\u00eancia: amount \u2248 area \u00d7 price em 95% dos casos</li> </ul> <p>Pr\u00f3xima Se\u00e7\u00e3o: Modelos de Training</p>"},{"location":"dataset/overview/","title":"Descri\u00e7\u00e3o dos Dados","text":""},{"location":"dataset/overview/#fonte-e-escopo","title":"Fonte e Escopo","text":"<p>Os dados foram coletados do mercado imobili\u00e1rio chin\u00eas, cobrindo transa\u00e7\u00f5es de propriedades residenciais no per\u00edodo de janeiro de 2019 a julho de 2024.</p>"},{"location":"dataset/overview/#granularidade","title":"Granularidade","text":"<ul> <li>N\u00edvel de agrega\u00e7\u00e3o: Setor (sector_id) + M\u00eas (period)</li> <li>Total de observa\u00e7\u00f5es: 5.433 registros</li> <li>Setores distintos: 95</li> <li>Per\u00edodo temporal: 67 meses</li> </ul>"},{"location":"dataset/overview/#variaveis-principais","title":"Vari\u00e1veis Principais","text":""},{"location":"dataset/overview/#alvo-target","title":"Alvo (Target)","text":"<p>amount_new_house_transactions:</p> <ul> <li>Volume de transa\u00e7\u00f5es de propriedades novas (em 10k yuan)</li> <li>Altamente assim\u00e9trica (skewness &gt; 2)</li> <li>Cont\u00e9m zeros (per\u00edodos sem transa\u00e7\u00f5es)</li> <li>Transforma\u00e7\u00e3o log1p aplicada durante modelagem</li> </ul>"},{"location":"dataset/overview/#features-originais-basicas","title":"Features Originais (B\u00e1sicas)","text":"<ul> <li>price: Pre\u00e7o m\u00e9dio por m\u00b2</li> <li>area: \u00c1rea constru\u00edda total</li> <li>num: N\u00famero de unidades</li> </ul>"},{"location":"dataset/overview/#agregacoes-temporais","title":"Agrega\u00e7\u00f5es Temporais","text":"<ul> <li>month: M\u00eas do ano (1-12)</li> <li>quarter: Trimestre (1-4)</li> <li>year: Ano</li> </ul>"},{"location":"dataset/overview/#indicadores-de-poi-e-macroeconomicos","title":"Indicadores de POI e Macroecon\u00f4micos","text":"<ul> <li>Dados de Points of Interest (POI) para com\u00e9rcio e servi\u00e7os</li> <li>\u00cdndices macroecon\u00f4micos (em sua maioria com dados faltantes)</li> </ul>"},{"location":"dataset/overview/#preparacao-dos-dados","title":"Prepara\u00e7\u00e3o dos Dados","text":""},{"location":"dataset/overview/#limpeza","title":"Limpeza","text":"<ul> <li>Remo\u00e7\u00e3o de registros com datas inv\u00e1lidas</li> <li>Verifica\u00e7\u00e3o de consist\u00eancia (amount \u2248 area \u00d7 price)</li> <li>Tratamento de valores anomalos</li> </ul>"},{"location":"dataset/overview/#transformacoes","title":"Transforma\u00e7\u00f5es","text":"<ul> <li>Log1p na vari\u00e1vel alvo para normalizar distribui\u00e7\u00e3o</li> <li>StandardScaler nas features num\u00e9ricas</li> <li>Encoding ordinal para vari\u00e1veis categ\u00f3ricas</li> </ul> <p>Pr\u00f3xima Se\u00e7\u00e3o: Explora\u00e7\u00e3o Inicial</p>"},{"location":"evaluation/comparison/","title":"Comparacao dos Modelos","text":""},{"location":"evaluation/comparison/#visao-geral","title":"Visao Geral","text":"<p>Analise comparativa detalhada entre v1, v2 e v3 usando multiplas dimensoes.</p>"},{"location":"evaluation/comparison/#resultados-numericos","title":"Resultados Numericos","text":""},{"location":"evaluation/comparison/#metricas-principais","title":"Metricas Principais","text":"Modelo RMSE MAE MSE R\u00b2 Competition Score v1 38.937,57 13.565,70 - 0,5513 - v2 7.547,03 1.626,75 - 0,9763 0,9530 v3 19.991,72 863,65 399.669.007 0,9942 0,7821"},{"location":"evaluation/comparison/#ganhos-de-desempenho","title":"Ganhos de Desempenho","text":""},{"location":"evaluation/comparison/#v1-v2","title":"v1 \u2192 v2","text":"<ul> <li>RMSE: 38.937,57 \u2192 7.547,03 (-80,6%)</li> <li>MAE: 13.565,70 \u2192 1.626,75 (-88,0%)</li> <li>R\u00b2: 0,5513 \u2192 0,9763 (+77,1pp)</li> </ul>"},{"location":"evaluation/comparison/#v1-v3","title":"v1 \u2192 v3","text":"<ul> <li>RMSE: 38.937,57 \u2192 19.991,72 (-48,6%)</li> <li>MAE: 13.565,70 \u2192 863,65 (-93,6%)</li> <li>R\u00b2: 0,5513 \u2192 0,9942 (+44,3pp)</li> <li>Competition Score: - \u2192 0,7821</li> </ul>"},{"location":"evaluation/comparison/#v2-v3","title":"v2 \u2192 v3","text":"<ul> <li>RMSE: 7.547,03 \u2192 19.991,72 (+165%) PIORA</li> <li>MAE: 1.626,75 \u2192 863,65 MELHORA (-47%)</li> <li>R\u00b2: 0,9763 \u2192 0,9942 (+0,18pp) MELHORA</li> <li>Competition Score: 0,9530 \u2192 0,7821 (-17,1pp) PIORA</li> </ul>"},{"location":"evaluation/comparison/#paradoxo-de-v3-r2-alta-vs-rmse-ruim","title":"Paradoxo de v3: R\u00b2 Alta vs RMSE Ruim","text":"<p>A situa\u00e7\u00e3o de v3 \u00e9 peculiar: - R\u00b2 aumenta de 0,9763 (v2) para 0,9942 (v3) - MAE melhora de 1.626,75 (v2) para 863,65 (v3) - MAS RMSE piora drasticamente de 7.547,03 (v2) para 19.991,72 (v3) - E Competition Score cai de 0,9530 (v2) para 0,7821 (v3)</p> <p>Explica\u00e7\u00e3o: OVERFITTING severo - O modelo v3 ajusta perfeitamente aos dados de treino - Mas quando prediz dados novos (teste), erra muito - A m\u00e9trica R\u00b2 \u00e9 insens\u00edvel a este tipo de erro em s\u00e9ries temporais</p>"},{"location":"evaluation/comparison/#estabilidade-entre-folds","title":"Estabilidade Entre Folds","text":""},{"location":"evaluation/comparison/#v2-consistencia-alta","title":"v2: Consistencia Alta","text":"Fold R2 Desvio 0-4 0,96-0,99 Baixo <p>Variacao esperada por setor (folds com setores distintos).</p>"},{"location":"evaluation/comparison/#v3-dados-incompletos","title":"v3: Dados Incompletos","text":"<p>Falta de detalhe por fold em v3, mas Competition Score variava significativamente.</p>"},{"location":"evaluation/comparison/#tempo-de-computacao","title":"Tempo de Computacao","text":"Modelo Tempo Estimado v1 10-15 min v2 15-20 min v3 2-3 horas <p>v3 nao justifica 10x mais tempo pela piora de performance.</p>"},{"location":"evaluation/comparison/#analise-por-dimensoes","title":"Analise por Dimensoes","text":""},{"location":"evaluation/comparison/#feature-space","title":"Feature Space","text":"<ul> <li>v1: 63 features (muito ruido)</li> <li>v2: 27 features engineered (sinal/ruido otimizado)</li> <li>v3: 27 features (mesmo de v2)</li> </ul> <p>Conclusao: Reducao de features em v2 foi acertada.</p>"},{"location":"evaluation/comparison/#validacao","title":"Validacao","text":"<ul> <li>v1: TimeSeriesSplit (generico)</li> <li>v2: GroupKFold por setor (apropriado) \u2705</li> <li>v3: TimeSeriesSplit (volta para pior opcao)</li> </ul> <p>Conclusao: v2 escolheu melhor metodo de validacao.</p>"},{"location":"evaluation/comparison/#arquitetura","title":"Arquitetura","text":"<ul> <li>v1: Fixa (256, 128, 64)</li> <li>v2: Fixa (256, 128, 64)</li> <li>v3: Busca 12 combinacoes</li> </ul> <p>Conclusao: Arquitetura de v1/v2 foi suficiente.</p>"},{"location":"evaluation/comparison/#diagnosticos","title":"Diagnosticos","text":""},{"location":"evaluation/comparison/#residuos-v2","title":"Res\u00edduos (v2)","text":"<ul> <li>Distribuicao aproximadamente normal</li> <li>Sem vieses sistematicos</li> <li>Variancia aproximadamente constante</li> </ul>"},{"location":"evaluation/comparison/#predito-vs-real-v2","title":"Predito vs Real (v2)","text":"<ul> <li>Pontos proximos a diagonal</li> <li>Bom ajuste em toda faixa de valores</li> </ul>"},{"location":"evaluation/comparison/#interpretacao-academica","title":"Interpretacao Academica","text":""},{"location":"evaluation/comparison/#descoberta-principal","title":"Descoberta Principal","text":"<p>O feature engineering apropriado (lags, medias moveis, validacao hierarquica) produziu ganho massivo. Busca ulteriore de hiperparametros nao trouxe melhorias.</p>"},{"location":"evaluation/comparison/#implicacao","title":"Implicacao","text":"<p>Nem sempre mais sofisticacao = melhor desempenho. Escolhas fundamentais importam mais que otimizacao fina.</p> <p>Proxima Secao: Resultados Finais</p>"},{"location":"evaluation/metrics/","title":"Metricas de Desempenho","text":""},{"location":"evaluation/metrics/#introducao","title":"Introducao","text":"<p>Quatro metricas padronizadas sao utilizadas para avaliar os modelos de forma consistente.</p>"},{"location":"evaluation/metrics/#rmse-root-mean-squared-error","title":"RMSE (Root Mean Squared Error)","text":""},{"location":"evaluation/metrics/#formula","title":"Formula","text":"<pre><code>RMSE = sqrt( (1/n) * sum( (y_true - y_pred)^2 ) )\n</code></pre>"},{"location":"evaluation/metrics/#interpretacao","title":"Interpretacao","text":"<ul> <li>Erro medio penalizando desvios grandes</li> <li>Mesma escala da variavel alvo</li> <li>Menor e melhor</li> </ul>"},{"location":"evaluation/metrics/#exemplo","title":"Exemplo","text":"<p>Se RMSE = 7.547, o modelo erra em media por 7.547 unidades (em escala linear).</p>"},{"location":"evaluation/metrics/#mae-mean-absolute-error","title":"MAE (Mean Absolute Error)","text":""},{"location":"evaluation/metrics/#formula_1","title":"Formula","text":"<pre><code>MAE = (1/n) * sum( |y_true - y_pred| )\n</code></pre>"},{"location":"evaluation/metrics/#interpretacao_1","title":"Interpretacao","text":"<ul> <li>Erro tipico, robusto a outliers</li> <li>Mesma escala da variavel alvo</li> <li>Menor e melhor</li> </ul>"},{"location":"evaluation/metrics/#vantagem-vs-rmse","title":"Vantagem vs RMSE","text":"<ul> <li>MAE e menos sens\u00edvel a valores extremos</li> <li>Mais compreens\u00edvel: \"erro tipico\"</li> </ul>"},{"location":"evaluation/metrics/#r2-coeficiente-de-determinacao","title":"R2 (Coeficiente de Determinacao)","text":""},{"location":"evaluation/metrics/#formula_2","title":"Formula","text":"<pre><code>R2 = 1 - (SS_res / SS_tot)\n\nonde:\nSS_res = sum( (y_true - y_pred)^2 )\nSS_tot = sum( (y_true - media(y))^2 )\n</code></pre>"},{"location":"evaluation/metrics/#interpretacao_2","title":"Interpretacao","text":"<ul> <li>Proporcao da variancia explicada pelo modelo</li> <li>Intervalo tipico [0, 1]</li> <li>Maior e melhor</li> <li>Permite comparacao universal (independente de escala)</li> </ul>"},{"location":"evaluation/metrics/#exemplos","title":"Exemplos","text":"R2 Significado 0,97 Modelo explica 97% da variancia (excelente) 0,80 Modelo explica 80% da variancia (bom) 0,50 Modelo explica 50% da variancia (modesto) 0,00 Modelo nao e melhor que predizer a media"},{"location":"evaluation/metrics/#competition-score-metrica-customizada","title":"Competition Score (Metrica Customizada)","text":""},{"location":"evaluation/metrics/#conceito","title":"Conceito","text":"<p>Baseado em Absolute Percentage Error (APE) com penalizacoes:</p> <pre><code>APE = |y_true - y_pred| / |y_true|\n\nRegras:\n1. Se &gt; 30% das predicoes tem APE &gt; 1.0: score = 0\n2. Senao: score = 1 - (MAPE das predicoes com APE &lt;= 1.0)\n</code></pre>"},{"location":"evaluation/metrics/#interpretacao_3","title":"Interpretacao","text":"<ul> <li>Metrica especifica da competicao</li> <li>Prioriza acuracia em predicoes dentro de 100% de erro</li> <li>Penaliza severamente grandes desvios percentuais</li> <li>Intervalo [0, 1], maior e melhor</li> </ul>"},{"location":"evaluation/metrics/#vantagem","title":"Vantagem","text":"<ul> <li>Apropriada para mercados com variacao em escala</li> <li>Nao penaliza erros pequenos em numeros grandes</li> </ul>"},{"location":"evaluation/metrics/#comparacao-entre-metricas","title":"Comparacao Entre Metricas","text":"Metrica Escala Interpretacao Melhor Para RMSE Mesma variavel Penaliza grandes erros Detectar outliers MAE Mesma variavel Erro tipico Interpretabilidade geral R2 [0,1] % variancia explicada Comparacao universal Competition Score [0,1] Especifico dominio Competicao"},{"location":"evaluation/metrics/#uso-recomendado","title":"Uso Recomendado","text":"<p>Para comparacao independente da competicao:</p> <ol> <li>Priorize R2: Comparavel entre contextos diferentes</li> <li>Use RMSE: Interpretacao em unidades originais</li> <li>Valide com MAE: Robustez a outliers</li> </ol> <p>Proxima Secao: Comparacao dos Modelos</p>"},{"location":"evaluation/results/","title":"Resultados Finais","text":""},{"location":"evaluation/results/#galeria-rapida-figuras","title":"Galeria R\u00e1pida (Figuras)","text":"<ul> <li>Predito vs Real (v2): </li> <li>Curva de Perda (v2): </li> <li>Res\u00edduos (v2): </li> <li>Import\u00e2ncia por Permuta\u00e7\u00e3o (v2): </li> <li>Predito vs Real (v3): </li> <li>Curva de Perda (v3): </li> <li>Res\u00edduos (v3): </li> <li>Import\u00e2ncia por Permuta\u00e7\u00e3o (v3): </li> <li>Evolu\u00e7\u00e3o do Best Competition Score por Itera\u00e7\u00e3o (v3): </li> </ul>"},{"location":"evaluation/results/#conclusoes-principais","title":"Conclusoes Principais","text":""},{"location":"evaluation/results/#1-superioridade-de-v2","title":"1. Superioridade de v2","text":"<p>O modelo v2 demonstrou a melhor performance em todas as metricas:</p> <ul> <li>R2 = 0,9763: Explica 97,63% da variancia nos dados</li> <li>RMSE = 7.547: Erro medio 80,6% menor que v1</li> <li>MAE = 1.627: Erro tipico 88,0% menor que v1</li> <li>Competition Score = 0,9530: Acuracia de 95,3%</li> </ul>"},{"location":"evaluation/results/#2-importancia-do-feature-engineering","title":"2. Importancia do Feature Engineering","text":"<p>A melhoria massiva de v1 para v2 foi alcancada primariamente atraves de:</p> <ol> <li>Lags Temporais: Capturaram dependencias entre periodos</li> <li>Medias Moveis: Suavizaram ruido e identificaram tendencias</li> <li>Features Engineered: Reducoes de dimensionalidade (63 -&gt; 27)</li> <li>Validacao Apropriada: GroupKFold por setor evitou data leakage</li> </ol>"},{"location":"evaluation/results/#3-limites-da-otimizacao","title":"3. Limites da Otimizacao","text":"<p>v3 demonstrou que busca extensiva de hiperparametros nao garante melhoria:</p> <ul> <li>Piorou 165% em RMSE</li> <li>Reduziu 16,9pp em Competition Score</li> <li>Consumiu 10x mais tempo de computacao</li> </ul>"},{"location":"evaluation/results/#recomendacoes-praticas","title":"Recomendacoes Praticas","text":""},{"location":"evaluation/results/#para-producao","title":"Para Producao","text":"<p>RECOMENDACAO: Usar Modelo v2</p> <p>Razoes: 1. Melhor performance comprovada 2. Tempo de treino aceitavel (15-20 min) 3. Interpretabilidade clara (27 features com significado) 4. Validacao apropriada (respeta hierarquia setorial)</p>"},{"location":"evaluation/results/#para-pesquisa-futura","title":"Para Pesquisa Futura","text":"<p>Se buscar melhorias alem de v2:</p> <ol> <li>Mantenha GroupKFold: Nao volte a TimeSeriesSplit</li> <li>Explore novos modelos: XGBoost, LightGBM, ensemble methods</li> <li>Feature engineering incremental: Adicione features de dominio</li> <li>Dados externos: Incorpore indicadores macroecon\u00f4micos</li> <li>Analise setorial: Modelos especificos para setores problematicos</li> </ol>"},{"location":"evaluation/results/#impacto-quantitativo","title":"Impacto Quantitativo","text":""},{"location":"evaluation/results/#ganho-total-alcancado","title":"Ganho Total Alcancado","text":"<pre><code>Baseline (v1): R\u00b2 = 0,5513\nFinal (v2):    R\u00b2 = 0,9763\nGanho:         77,0 pontos percentuais (139% relativo)\n</code></pre>"},{"location":"evaluation/results/#reducao-de-erro","title":"Reducao de Erro","text":"<pre><code>RMSE Baseline:   38.937,57\nRMSE Final:      7.547,03\nReducao:         80,6%\n</code></pre>"},{"location":"evaluation/results/#custo-beneficio","title":"Custo-Beneficio","text":"Aspecto v1 v2 Diferenca Performance (R2) 0,55 0,98 +77,0pp Tempo Treino 10 min 15 min +5 min (50%) Complexidade Baixa Media Interpretavel"},{"location":"evaluation/results/#contribuicoes-academicas","title":"Contribuicoes Academicas","text":""},{"location":"evaluation/results/#1-feature-engineering-para-series-temporais-hierarquicas","title":"1. Feature Engineering para Series Temporais Hierarquicas","text":"<p>Demonstrou a efetividade de: - Lags multi-escala (1, 3, 6 meses) - Rolling aggregations (medias moveis) - Validacao respeitando hierarquia de dados</p>"},{"location":"evaluation/results/#2-validacao-apropriada","title":"2. Validacao Apropriada","text":"<p>Mostrou que escolher GroupKFold em vez de TimeSeriesSplit generico melhorou desempenho para dados hierarquicos.</p>"},{"location":"evaluation/results/#3-trade-offs-de-complexidade","title":"3. Trade-offs de Complexidade","text":"<p>Ilustrou que sofisticacao nao e equivalente a desempenho. Regularizacao excessiva prejudicou o modelo.</p>"},{"location":"evaluation/results/#arquivos-de-saida","title":"Arquivos de Saida","text":""},{"location":"evaluation/results/#modelos-treinados","title":"Modelos Treinados","text":"<ul> <li><code>mlp_model_v1.joblib</code>: Modelo baseline</li> <li><code>mlp_model_v2.joblib</code>: Modelo recomendado</li> <li><code>mlp_model_v3.joblib</code>: Modelo otimizado (para referencia)</li> </ul>"},{"location":"evaluation/results/#metricas-calculadas","title":"Metricas Calculadas","text":"<ul> <li><code>metricas_v1.json</code>: Desempenho de v1</li> <li><code>metricas_v2.json</code>: Desempenho de v2 com por-fold</li> <li><code>metricas_v3.json</code>: Desempenho de v3 com grid search</li> </ul>"},{"location":"evaluation/results/#predicoes","title":"Predicoes","text":"<ul> <li><code>submission_v2.csv</code>: Predicoes recomendadas</li> </ul>"},{"location":"evaluation/results/#metricas-do-melhor-modelo-v3","title":"Metricas do Melhor Modelo v3","text":"Metrica Valor RMSE 19.991,72 MAE 863,65 MSE 399.669.007 R\u00b2 0,9942 Competition Score 0,7821"},{"location":"evaluation/results/#comparacao-completa-v1-vs-v2-vs-v3","title":"Comparacao Completa: v1 vs v2 vs v3","text":""},{"location":"evaluation/results/#tabela-de-metricas-finais","title":"Tabela de Metricas Finais","text":"Metrica v1 (Baseline) v2 (Recomendado) v3 (Otimizacao) RMSE 38.937,57 7.547,03 19.991,72 MAE 13.565,70 1.626,75 863,65 MSE - - 399.669.007 R\u00b2 0,5513 0,9763 0,9942 Competition Score - 0,9530 0,7821"},{"location":"evaluation/results/#resumo-de-desempenho","title":"Resumo de Desempenho","text":""},{"location":"evaluation/results/#v1-baseline","title":"v1 - Baseline","text":"<ul> <li>RMSE: 38.937,57 (linha de base)</li> <li>MAE: 13.565,70</li> <li>R\u00b2: 0,5513 (explica ~55% da vari\u00e2ncia)</li> <li>Modelo simples sem feature engineering</li> </ul>"},{"location":"evaluation/results/#v2-recomendado-melhor","title":"v2 - Recomendado (MELHOR)","text":"<ul> <li>RMSE: 7.547,03 (82% melhor que v1)</li> <li>MAE: 1.626,75 (88% melhor que v1)</li> <li>R\u00b2: 0,9763 (explica ~98% da vari\u00e2ncia)</li> <li>Competition Score: 0,9530</li> <li>Feature engineering avan\u00e7ado com lags e m\u00e9dias m\u00f3veis</li> <li>Valida\u00e7\u00e3o por setor (GroupKFold)</li> <li>Melhor generaliza\u00e7\u00e3o</li> </ul>"},{"location":"evaluation/results/#v3-otimizacao-overfitting","title":"v3 - Otimizacao (Overfitting)","text":"<ul> <li>RMSE: 19.991,72 (intermedi\u00e1rio entre v1 e v2)</li> <li>MAE: 863,65 (pior que v2)</li> <li>MSE: 399.669.007</li> <li>R\u00b2: 0,9942 (MAIS ALTA que v2!)</li> <li>Competition Score: 0,7821</li> <li>Busca sistem\u00e1tica de 36 hiperpar\u00e2metros com 3 seeds</li> <li>Melhor configura\u00e7\u00e3o: [256, 128, 64] com tanh</li> <li>PROBLEMA: R\u00b2 elevada mas RMSE ruim = OVERFITTING SEVERO</li> </ul>"},{"location":"evaluation/results/#analise-comparativa","title":"Analise Comparativa","text":""},{"location":"evaluation/results/#progressao-de-rmse","title":"Progressao de RMSE","text":"<pre><code>v1: 38.937,57 \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 (referencia)\nv3: 19.991,72 \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 (intermedi\u00e1rio)\nv2:  7.547,03 \u2501\u2501\u2501 (melhor!)\n</code></pre>"},{"location":"evaluation/results/#progressao-de-r2","title":"Progressao de R\u00b2","text":"<pre><code>v1: 0,5513  \u2588\u2588\u2588\u2588 \nv2: 0,9763  \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (excelente!)\nv3: 0,9942  \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (parece melhor mas OVERFITTING!)\n</code></pre>"},{"location":"evaluation/results/#competition-score","title":"Competition Score","text":"<pre><code>v2: 0,9530 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (excelente)\nv3: 0,7821 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (bom)\nv1: -      - (n\u00e3o calculado)\n</code></pre>"},{"location":"evaluation/results/#conclusoes-principais_1","title":"Conclusoes Principais","text":"<ol> <li>v2 \u00e9 a solu\u00e7\u00e3o recomendada</li> <li>Melhor RMSE (7.547,03)</li> <li>Melhor R\u00b2 com GENERALIZA\u00c7\u00c3O (0,9763)</li> <li>Melhor Competition Score (0,9530)</li> <li> <p>Feature engineering provou ser mais efetivo</p> </li> <li> <p>v3 sofre com OVERFITTING severo</p> </li> <li>R\u00b2 mais alta (0,9942) que v2 mas RMSE 2,65x PIOR</li> <li>RMSE no teste: 19.991,72 vs RMSE no treino: 3.734,49</li> <li>A discrepancia revela que o modelo n\u00e3o generaliza</li> <li> <p>Li\u00e7\u00f5es: R\u00b2 N\u00c3O \u00e9 m\u00e9trica confi\u00e1vel para s\u00e9ries temporais</p> </li> <li> <p>v1 serviu como baseline</p> </li> <li>RMSE: 38.937,57</li> <li>Demonstrou a necessidade de melhorias</li> <li>v2 alcan\u00e7ou 81% de melhoria sobre v1</li> </ol>"},{"location":"evaluation/results/#insights-tecnicos","title":"Insights T\u00e9cnicos","text":"<ul> <li>Feature Engineering &gt; Otimizacao: v2 com feature engineering bateu v3 com busca exaustiva</li> <li>Validacao Importa: GroupKFold (v2) foi melhor que TimeSeriesSplit (v3)</li> <li>Arquitetura Profunda com Overfitting: v3 com 3 camadas [256,128,64] ajusta perfeitamente ao treino mas falha no teste</li> <li>R\u00b2 \u00e9 Enganosa: M\u00e9trica R\u00b2 alta n\u00e3o garante boa generaliza\u00e7\u00e3o em s\u00e9ries temporais</li> <li>Regularizacao Insuficiente: Alpha=0.0001 n\u00e3o foi forte o bastante contra overfitting em v3</li> </ul>"},{"location":"evaluation/results/#recomendacao-final","title":"Recomendacao Final","text":"<p>\u2713 Submeter v2 para a competi\u00e7\u00e3o Kaggle - Melhor RMSE e Competition Score - Melhor generaliza\u00e7\u00e3o - Feature engineering \u00e9 estrat\u00e9gia vencedora</p>"},{"location":"evaluation/results/#limitacoes","title":"Limitacoes","text":"<ol> <li>Dados limitados: 5.433 observacoes em 67 meses</li> <li>Sem dados externos: Indicadores macroecon\u00f4micos indisponiveis</li> <li>Dominio nao explorado: Desafios specificos do mercado chines nao totalmente capturados</li> <li>Horizonte temporal: Sem validacao em periodos futuros</li> </ol>"},{"location":"evaluation/results/#trabalho-futuro","title":"Trabalho Futuro","text":"<ol> <li>Incorporar dados de POI dispon\u00edveis</li> <li>Pesquisar din\u00e2micas do mercado imobili\u00e1rio chines</li> <li>Explorar modelos de aprendizado profundo (LSTM)</li> <li>Implementar sistema de monitoramento em producao</li> <li>A/B testing de v2 vs v3 em dados reais</li> </ol> <p>Status: Analise Completa Data: 2025-10-25 Proxima Secao: Conclusoes</p>"},{"location":"training/overview/","title":"Modelos de Training - Vis\u00e3o Geral","text":""},{"location":"training/overview/#abordagem-geral","title":"Abordagem Geral","text":"<p>Foram desenvolvidas tr\u00eas vers\u00f5es de modelos MLPRegressor (redes neurais artificiais) com complexidade e sofistica\u00e7\u00e3o crescentes.</p> Aspecto v1 v2 v3 Features 63 b\u00e1sicas 27 engineered 27 engineered Valida\u00e7\u00e3o TimeSeriesSplit GroupKFold TimeSeriesSplit + Seeds Arquitetura Fixa Fixa Busca autom\u00e1tica Tempo Treino ~10 min ~15 min ~2-3 horas"},{"location":"training/overview/#arquitetura-base-mlp","title":"Arquitetura Base (MLP)","text":"<pre><code>Entrada (N features)\n  |\n  v\nCamada Oculta 1: 256 neur\u00f4nios (ReLU/Tanh)\n  |\n  v\nCamada Oculta 2: 128 neur\u00f4nios (ReLU/Tanh)\n  |\n  v\nCamada Oculta 3: 64 neur\u00f4nios (ReLU/Tanh)\n  |\n  v\nSa\u00edda (1 neur\u00f4nio - regress\u00e3o)\n</code></pre>"},{"location":"training/overview/#mecanismo-de-validacao","title":"Mecanismo de Valida\u00e7\u00e3o","text":""},{"location":"training/overview/#v1-timeseriessplit","title":"v1: TimeSeriesSplit","text":"<ul> <li>Respeita ordem temporal</li> <li>Sem data leakage entre treino/teste</li> <li>Menos adequado para dados hier\u00e1rquicos</li> </ul>"},{"location":"training/overview/#v2-groupkfold","title":"v2: GroupKFold","text":"<ul> <li>Agrupa por setor (sector_id)</li> <li>Garante representa\u00e7\u00e3o de todos os 95 setores</li> <li>Evita data leakage setorial</li> <li>5 folds balanceados</li> </ul>"},{"location":"training/overview/#v3-timeseriessplit-multiple-seeds","title":"v3: TimeSeriesSplit + Multiple Seeds","text":"<ul> <li>Valida\u00e7\u00e3o temporal </li> <li>3 seeds distintos (42, 123, 456)</li> <li>Avalia robustez e reprodutibilidade</li> </ul>"},{"location":"training/overview/#transformacoes-de-dados","title":"Transforma\u00e7\u00f5es de Dados","text":"<ul> <li>Alvo: log1p(amount_new_house_transactions)</li> <li>Reverso para predi\u00e7\u00f5es: expm1(predi\u00e7\u00f5es)</li> <li>Features: StandardScaler normaliza para m\u00e9dia 0, desvio 1</li> </ul>"},{"location":"training/overview/#comparacao-resumida","title":"Compara\u00e7\u00e3o Resumida","text":"Modelo Valida\u00e7\u00e3o Features RMSE MAE R\u00b2 Competition Score v1 TimeSeriesSplit 27 38.937,57 13.565,70 0,5513 - v2 GroupKFold 27 + lags 7.547,03 1.626,75 0,9763 0,9530 v3 TimeSeriesSplit 27 19.991,72 863,65 0,9942 0,7821 <p>Resultado Final: v2 \u00e9 superior em m\u00e9trica de competi\u00e7\u00e3o e generaliza\u00e7\u00e3o, apesar de v3 ter R\u00b2 mais alta (OVERFITTING).</p> <p>Pr\u00f3ximas se\u00e7\u00f5es: - Modelo v1 - Baseline - Modelo v2 - Feature Engineering - Modelo v3 - Otimiza\u00e7\u00e3o</p>"},{"location":"training/v1/","title":"Modelo v1 - Baseline","text":""},{"location":"training/v1/#objetivo","title":"Objetivo","text":"<p>Estabelecer um modelo de refer\u00eancia simples para compara\u00e7\u00e3o com vers\u00f5es posteriores.</p>"},{"location":"training/v1/#caracteristicas","title":"Caracter\u00edsticas","text":"<ul> <li>Sem feature engineering avan\u00e7ado</li> <li>Valida\u00e7\u00e3o temporal (TimeSeriesSplit)</li> <li>Arquitetura MLP fixa</li> <li>Features b\u00e1sicas e algumas defasagens simples</li> </ul>"},{"location":"training/v1/#configuracao","title":"Configura\u00e7\u00e3o","text":""},{"location":"training/v1/#hiperparametros","title":"Hiperpar\u00e2metros","text":"<pre><code>MLPRegressor(\n    hidden_layer_sizes=(256, 128, 64),\n    activation='relu',\n    solver='adam',\n    alpha=1e-5,  \n    batch_size=64,\n    learning_rate_init=0.001,\n    max_iter=500,\n    early_stopping=True,\n    validation_fraction=0.15,\n    n_iter_no_change=50,\n    random_state=42\n)\n</code></pre>"},{"location":"training/v1/#features","title":"Features","text":"<p>63 features incluindo:</p> <ul> <li>price, area, num (b\u00e1sicas)</li> <li>month, quarter, year (temporais)</li> <li>Algumas features POI e macroecon\u00f4micas</li> </ul>"},{"location":"training/v1/#validacao","title":"Valida\u00e7\u00e3o","text":"<ul> <li>M\u00e9todo: TimeSeriesSplit (5 splits)</li> <li>Treino: 5.305 observa\u00e7\u00f5es</li> <li>Teste: 1.060 observa\u00e7\u00f5es (\u00faltimos 20%)</li> </ul>"},{"location":"training/v1/#resultados","title":"Resultados","text":""},{"location":"training/v1/#metricas-no-conjunto-de-teste","title":"M\u00e9tricas no Conjunto de Teste","text":"M\u00e9trica Valor RMSE 38.937,57 MAE 13.565,70 \\(R^2\\) 0,5513"},{"location":"training/v1/#interpretacao","title":"Interpreta\u00e7\u00e3o","text":"<ul> <li>RMSE alto indica grandes erros m\u00e9dios</li> <li>MAE mostra erro t\u00edpico de 13.5k yuan</li> <li>\\(R^2\\) = 0,55 significa que o modelo explica apenas 55% da vari\u00e2ncia</li> <li>Modelo n\u00e3o captura bem a din\u00e2mica temporal dos dados</li> </ul>"},{"location":"training/v1/#avaliacao-visual-do-v1","title":"Avalia\u00e7\u00e3o visual do v1","text":""},{"location":"training/v1/#problemas-identificados","title":"Problemas Identificados","text":"<ol> <li> <p>Falta de features temporais sofisticadas</p> <ul> <li>Sem defasagens que capturem depend\u00eancias</li> <li>Sem m\u00e9dias m\u00f3veis</li> </ul> </li> <li> <p>Valida\u00e7\u00e3o inadequada</p> <ul> <li>TimeSeriesSplit n\u00e3o respeita a hierarquia setorial</li> <li>Poss\u00edvel data leakage entre setores</li> </ul> </li> <li> <p>Escala de features</p> <ul> <li>Features com escalas muito diferentes</li> <li>Pode prejudicar a converg\u00eancia</li> </ul> </li> </ol>"},{"location":"training/v1/#conclusoes","title":"Conclus\u00f5es","text":"<p>O v1 serve como baseline, demonstrando que uma abordagem simples \u00e9 insuficiente. A necessidade de melhorias \u00e9 evidente, motivando o desenvolvimento do v2.</p> <p>Pr\u00f3xima Se\u00e7\u00e3o: Modelo v2 - Feature Engineering</p>"},{"location":"training/v2/","title":"Modelo v2 - Feature Engineering","text":""},{"location":"training/v2/#objetivo","title":"Objetivo","text":"<p>Implementar feature engineering para capturar din\u00e2mica temporal e sazonalidade.</p>"},{"location":"training/v2/#mudancas-principais-vs-v1","title":"Mudancas Principais Vs v1","text":""},{"location":"training/v2/#1-feature-engineering-avancado","title":"1. Feature Engineering Avancado","text":"<p>Lags (defasagens):</p> <ul> <li>price_lag1, price_lag3, price_lag6</li> <li>area_lag1, area_lag3, area_lag6</li> <li>num_lag1, num_lag3, num_lag6</li> <li>amount_lag1, amount_lag3, amount_lag6</li> </ul> <p>Captura dependencias temporais: padrao atual pode depender de valores 1, 3 ou 6 meses atras.</p> <p>Medias Moveis (Rolling Means):</p> <ul> <li>price_ma3, price_ma6 (media de 3 e 6 meses)</li> <li>area_ma3, area_ma6</li> <li>amount_ma3, amount_ma6</li> </ul> <p>Suaviza ruido e identifica tendencias.</p> <p>Interacoes e Ratios:</p> <ul> <li>price_x_area: valor total impl\u00edcito</li> <li>price_per_unit: normalizacao por unidade</li> <li>area_per_unit: densidade de area</li> </ul> <p>Features Temporais:</p> <ul> <li>month (1-12): captura sazonalidade mensal</li> <li>quarter (1-4): captura sazonalidade trimestral</li> <li>year: tendencia anual</li> </ul> <p>Total: 27 features engineered (reducao de 63 - maior signal/noise)</p>"},{"location":"training/v2/#2-validacao-por-setor-groupkfold","title":"2. Validacao por Setor (GroupKFold)","text":"<pre><code>GroupKFold(n_splits=5, groups=sector_id)\n</code></pre> <ul> <li>Cada fold contem todos os 95 setores</li> <li>Evita data leakage setorial</li> <li>Garante que setor no treino nao aparece no teste do mesmo fold</li> <li>Mais apropriado para dados hierarquicos</li> </ul>"},{"location":"training/v2/#3-ajustes-de-hiperparametros","title":"3. Ajustes de Hiperparametros","text":"<pre><code>MLPRegressor(\n    hidden_layer_sizes=(256, 128, 64),\n    activation='tanh',  # V1: relu -&gt; V2: tanh (melhor com dados normalizados)\n    solver='adam',\n    alpha=1e-5,\n    batch_size=256,  # V1: 64 -&gt; V2: 256 (mais estavel)\n    learning_rate_init=0.01,  # V1: 0.001 -&gt; V2: 0.01 (convergencia rapida)\n    max_iter=500,\n    early_stopping=True,\n    validation_fraction=0.15,\n    n_iter_no_change=20,\n    random_state=42\n)\n</code></pre>"},{"location":"training/v2/#transformacoes-aplicadas","title":"Transformacoes Aplicadas","text":"<ul> <li>log1p(target): normaliza distribuicao assimetrica</li> <li>StandardScaler: normaliza features</li> <li>Forward-fill: imputa dados faltantes em series temporais</li> </ul>"},{"location":"training/v2/#metricas-por-fold","title":"Metricas por Fold","text":"Fold RMSE MAE R2 Competition Score 0 2.527,87 1.143,52 0,9968 0,9568 1 2.880,27 1.053,08 0,9936 0,9584 2 7.042,31 1.300,78 0,9780 0,9629 3 5.851,92 1.665,47 0,9732 0,9331 4 13.680,21 2.982,59 0,9619 0,9532 Media 7.547,03 1.626,75 0,9763 0,9530"},{"location":"training/v2/#diagnosticos","title":"Diagnosticos","text":"<ul> <li>Res\u00edduos aproximadamente normais (Q-Q plot)</li> <li>Preditos vs Reais proximos a diagonal (bom ajuste)</li> <li>Consistencia entre folds (variabilidade esperada por setor)</li> </ul>"},{"location":"training/v2/#melhorias-vs-v1","title":"Melhorias vs v1","text":"Metrica v1 v2 Melhoria RMSE 38.937,57 7.547,03 -80,6% MAE 13.565,70 1.626,75 -88,0% R\u00b2 0,5513 0,9763 +77,0pp"},{"location":"training/v2/#interpretacao","title":"Interpretacao","text":"<ul> <li>Reducao massiva do RMSE indica predicoes muito mais acuradas</li> <li>R\u00b2 = 0,97 significa modelo explica 97% da variancia</li> <li>Lags e medias moveis capturam padrao sazonal do mercado</li> <li>Validacao por setor garante generalizacao regional</li> </ul>"},{"location":"training/v2/#conclusoes","title":"Conclusoes","text":"<p>O v2 demonstra o impacto do feature engineering apropriado. O modelo agora captura adequadamente a din\u00e2mica temporal e a sazonalidade.</p>"},{"location":"training/v2/#diagnosticos-visuais-adicionais","title":"Diagn\u00f3sticos Visuais Adicionais","text":""},{"location":"training/v2/#avaliacao-visual-do-v2-oof","title":"Avalia\u00e7\u00e3o visual do v2 (OOF)","text":""},{"location":"training/v2/#curva-de-perda-do-treinamento","title":"Curva de Perda do Treinamento","text":""},{"location":"training/v2/#predito-vs-real","title":"Predito vs. Real","text":""},{"location":"training/v2/#analise-de-residuos","title":"An\u00e1lise de Res\u00edduos","text":""},{"location":"training/v2/#importancia-das-features-v2","title":"Import\u00e2ncia das Features (v2)","text":""},{"location":"training/v2/#importancia-por-permutacao-v2","title":"Import\u00e2ncia por Permuta\u00e7\u00e3o (v2)","text":"<p>Pr\u00f3xima Se\u00e7\u00e3o: Modelo v3 - Otimiza\u00e7\u00e3o</p>"},{"location":"training/v3/","title":"Modelo v3 - Otimiza\u00e7\u00e3o de Hiperpar\u00e2metros","text":""},{"location":"training/v3/#objetivo","title":"Objetivo","text":"<p>Explorar sistematicamente o espa\u00e7o de hiperpar\u00e2metros para encontrar a configura\u00e7\u00e3o \u00f3tima.</p>"},{"location":"training/v3/#estrategia-de-busca","title":"Estrat\u00e9gia de Busca","text":""},{"location":"training/v3/#grade-de-hiperparametros","title":"Grade de Hiperpar\u00e2metros","text":"<pre><code>param_grid = {\n    'hidden_layer_sizes': [(128, 64, 32), (256, 128, 64), (256, 128)],\n    'activation': ['relu', 'tanh'],\n    'alpha': [1e-5, 1e-4, 1e-3],\n    'batch_size': [128, 256],\n    'learning_rate_init': [0.001, 0.01]\n}\n\n# Combina\u00e7\u00f5es: 3 \u00d7 2 \u00d7 3 \u00d7 2 \u00d7 2 = 72 potenciais\n# Com ParameterSampler(n_iter=12): 12 \u00d7 5 folds \u00d7 3 seeds = 180 modelos\n</code></pre>"},{"location":"training/v3/#criterios-de-selecao","title":"Crit\u00e9rios de Sele\u00e7\u00e3o","text":"<ol> <li>M\u00e9trica principal: Competition Score (maior e melhor)</li> <li>Crit\u00e9rio secund\u00e1rio: MSE (menor e melhor)</li> <li>Reprodutibilidade: 3 seeds distintos (42, 123, 456)</li> </ol>"},{"location":"training/v3/#melhor-configuracao-encontrada","title":"Melhor Configura\u00e7\u00e3o Encontrada","text":"<pre><code>{\n    'hidden_layer_sizes': (256, 128, 64),\n    'activation': 'tanh',\n    'alpha': 0.0001,  # 10x maior que v2 (mais regulariza\u00e7\u00e3o)\n    'batch_size': 128,  # Redu\u00e7\u00e3o de 256\n    'learning_rate_init': 0.001  # Redu\u00e7\u00e3o de 0.01\n}\n</code></pre>"},{"location":"training/v3/#protecoes-numericas","title":"Prote\u00e7\u00f5es Num\u00e9ricas","text":"<p>Implementadas para evitar overflow (O que ocorreu algumas vezes enquanto estava rodando):</p> <pre><code>LOG_MAX = 20.0    # exp(20) ~ 4.85e8\nLOG_MIN = -20.0\nPRED_MAX = 1e10\nPRED_MIN = 0.0\n\n# Clipping em log-space\ny_pred_log = np.clip(y_pred_log, LOG_MIN, LOG_MAX)\n\n# Tratamento NaN/Inf\ny_pred = np.nan_to_num(y_pred, nan=PRED_MIN, posinf=PRED_MAX, neginf=PRED_MIN)\n</code></pre>"},{"location":"training/v3/#validacao","title":"Valida\u00e7\u00e3o","text":"<ul> <li>M\u00e9todo: TimeSeriesSplit (5 splits)</li> <li>Mais r\u00edgida que GroupKFold (sem garantia de representa\u00e7\u00e3o setorial)</li> <li>M\u00faltiplos seeds para robustez</li> </ul>"},{"location":"training/v3/#resultados","title":"Resultados","text":""},{"location":"training/v3/#metricas-do-melhor-modelo","title":"M\u00e9tricas do Melhor Modelo","text":"M\u00e9trica Valor RMSE 19.991,72 MAE 863,65 MSE 399.669.007 \\(R^2\\) 0,9942 Competition Score 0,7821 <p>Resumo da Busca:</p> <ul> <li>Total de combina\u00e7\u00f5es testadas: 36</li> <li>Par\u00e2metros variados: hidden_layer_sizes (3), activation (2), alpha (3), batch_size (2), learning_rate (2)</li> <li>Seeds utilizados: 3</li> </ul>"},{"location":"training/v3/#metricas-no-conjunto-de-treino","title":"M\u00e9tricas no Conjunto de Treino","text":"M\u00e9trica Valor RMSE (Treino) 3.734,49 MAE (Treino) 863,65 MSE (Treino) 13.946.436 \\(R^2\\) (Treino) 0,9942"},{"location":"training/v3/#arquitetura-do-melhor-modelo","title":"Arquitetura do Melhor Modelo","text":"<pre><code>Input (27 features)\n  \u2193\nDense (256 units, tanh)\n  \u2193\nDense (128 units, tanh)\n  \u2193\nDense (64 units, tanh)\n  \u2193\nOutput (1 unit)\n</code></pre> <p>Hiperpar\u00e2metros \u00d3timos:</p> Par\u00e2metro Valor Hidden Layers [256, 128, 64] Activation tanh Alpha (L2) 0.0001 Batch Size 128 Learning Rate 0.001 Seed 42 Early Stopping Sim (30 paci\u00eancia) Max Iterations 400 Validation Fraction 15% Solver adam"},{"location":"training/v3/#comparacao-com-versoes-anteriores","title":"Compara\u00e7\u00e3o com Vers\u00f5es Anteriores","text":""},{"location":"training/v3/#rmse-root-mean-squared-error","title":"RMSE (Root Mean Squared Error)","text":"<ul> <li>v1 (Baseline): 38.937,57</li> <li>v2 (Recomendado): 7.547,03</li> <li>v3 (Otimiza\u00e7\u00e3o): 19.991,72</li> </ul> <p>v3 ficou intermedi\u00e1rio entre v1 e v2, sugerindo que nem sempre mais otimiza\u00e7\u00e3o = melhores resultados.</p>"},{"location":"training/v3/#r2-coeficiente-de-determinacao","title":"\\(R^2\\) (Coeficiente de Determina\u00e7\u00e3o)","text":"<ul> <li>v1 (Baseline): 0,5513</li> <li>v2 (Recomendado): 0,9763</li> <li>v3 (Otimiza\u00e7\u00e3o): 0,9942</li> </ul> <p>Curiosamente, o v3 explica MAIS vari\u00e2ncia (99,42%) que o v2 (97,63%) no conjunto de treino, mas o RMSE \u00e9 pior. Isso sugere overfitting severo.</p>"},{"location":"training/v3/#competition-score","title":"Competition Score","text":"<ul> <li>v1: -</li> <li>v2: 0,9530</li> <li>v3: 0,7821</li> </ul> <p>v2 continua com o melhor desempenho na m\u00e9trica da competi\u00e7\u00e3o.</p>"},{"location":"training/v3/#analise-de-resultados","title":"An\u00e1lise de Resultados","text":""},{"location":"training/v3/#overfitting-severo-em-v3","title":"Overfitting Severo em v3","text":"<p>A discrep\u00e2ncia entre \\(R^2\\) alto (0,9942) e RMSE elevado (19.991,72) em compara\u00e7\u00e3o com o v2 revela overfitting:</p> <ul> <li>v3 se ajusta perfeitamente aos dados de treino</li> <li>Mas n\u00e3o generaliza bem para dados novos</li> <li>v2 com \\(R^2\\)=0,9763 e RMSE=7.547,03 tem um melhor balan\u00e7o</li> </ul>"},{"location":"training/v3/#metricas-de-treino-vs-melhor-modelo","title":"M\u00e9tricas de Treino vs Melhor Modelo","text":"<pre><code>v3 Treino:        v3 Melhor Modelo:\nRMSE: 3.734,49    RMSE: 19.991,72  (5.36x pior)\n$R^2$: 0,9942        $R^2$: 0,9942       (mesma $R^2$)\n</code></pre> <p>A piora massiva em RMSE sem piora em \\(R^2\\) confirma que o modelo se comporta de maneira muito diferente em dados n\u00e3o vistos.</p>"},{"location":"training/v3/#por-que-o-v3-nao-superou-o-v2","title":"Por que o v3 N\u00e3o Superou o v2?","text":"<ol> <li> <p>Valida\u00e7\u00e3o Inadequada</p> <ul> <li>TimeSeriesSplit \u00e9 menos apropriado para dados hier\u00e1rquicos</li> <li>Sem garantia de representa\u00e7\u00e3o setorial</li> <li>Poss\u00edvel data leakage entre setores</li> </ul> </li> <li> <p>Regulariza\u00e7\u00e3o Excessiva</p> <ul> <li>Alpha aumentado 10x (1e-5 \u2192 0.0001)</li> <li>O modelo se tornou muito restritivo</li> <li>Poss\u00edvel underfitting</li> </ul> </li> <li> <p>Redu\u00e7\u00e3o do Learning Rate</p> <ul> <li>0.01 \u2192 0.001</li> <li>Converg\u00eancia mais lenta</li> <li>Poss\u00edvel parada prematura</li> </ul> </li> <li> <p>Overfitting da Busca</p> <ul> <li>12 combina\u00e7\u00f5es em 5 folds podem levar a overfitting</li> <li>A melhor configura\u00e7\u00e3o encontrada n\u00e3o generalizou</li> </ul> </li> </ol>"},{"location":"training/v3/#implicacoes","title":"Implica\u00e7\u00f5es","text":"<p>v3 agora fornece um conjunto completo de m\u00e9tricas: - RMSE: 19.991,72 - MAE: 863,65 - MSE: 399.669.007 - \\(R^2\\): 0,9942 - Competition Score: 0,7821</p>"},{"location":"training/v3/#observacao-critica","title":"Observa\u00e7\u00e3o Cr\u00edtica","text":"<p>Apesar do \\(R^2\\) elevad\u00edssimo (0,9942), o v3 tem um desempenho pr\u00e1tico pior que o v2: - RMSE 2,65x pior que o v2 - Competition Score 17% pior que o v2 - Indica OVERFITTING severo apesar da regulariza\u00e7\u00e3o L2</p>"},{"location":"training/v3/#conclusoes","title":"Conclus\u00f5es","text":"<ol> <li>Busca Extensiva: 36 combina\u00e7\u00f5es testadas com m\u00faltiplos seeds</li> <li>Modelo Selecionado: Arquitetura com 3 camadas (256-128-64) e tanh</li> <li>Desempenho: \\(R^2\\) alto mas RMSE elevado \u2192 OVERFITTING</li> <li>Insights Principais:<ul> <li>Otimiza\u00e7\u00e3o sem Feature Engineering n\u00e3o funciona</li> <li>Arquitetura profunda sofre com overfitting</li> <li>TimeSeriesSplit respeita a estrutura temporal, mas o v2 com GroupKFold foi melhor</li> <li>Feature Engineering (v2) foi mais efetivo que a otimiza\u00e7\u00e3o de par\u00e2metros (v3)</li> <li>\\(R^2\\) n\u00e3o \u00e9 uma m\u00e9trica confi\u00e1vel para detectar overfitting em dados de s\u00e9ries temporais</li> </ul> </li> </ol> <p>M\u00e9tricas Completas Salvas em JSON:</p> <p>O notebook agora calcula e salva as seguintes m\u00e9tricas:</p> <ul> <li>RMSE (Root Mean Squared Error)</li> <li>MAE (Mean Absolute Error)</li> <li>MSE (Mean Squared Error)</li> <li>\\(R^2\\) (Coeficiente de Determina\u00e7\u00e3o)</li> <li>Competition Score (m\u00e9trica customizada)</li> </ul> <p>Arquivo gerado: <code>metricas_v3.json</code></p>"},{"location":"training/v3/#conclusoes_1","title":"Conclus\u00f5es","text":"<p>O v3 serviu para explorar o espa\u00e7o de hiperpar\u00e2metros, mas n\u00e3o produziu melhorias. O v2 permanece como a melhor op\u00e7\u00e3o para produ\u00e7\u00e3o.</p> <p>Pr\u00f3xima Se\u00e7\u00e3o: Avalia\u00e7\u00e3o - M\u00e9tricas de Desempenho</p>"},{"location":"training/v3/#galeria-de-graficos-v3","title":"Galeria de Gr\u00e1ficos (v3)","text":"<ul> <li>Predito vs Real (treino): </li> <li>Distribui\u00e7\u00e3o dos Res\u00edduos: </li> <li>Curva de Perda (v3): </li> <li>Import\u00e2ncia por Permuta\u00e7\u00e3o (Top 20): </li> <li>Melhor Competition Score por Itera\u00e7\u00e3o da Busca: </li> </ul>"}]}